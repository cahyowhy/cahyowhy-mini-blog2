if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){s.detach().trigger("closed.bs.alert").remove()}var o=t(this),r=o.attr("data-target");r||(r=(r=o.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t("#"===r?[]:r);e&&e.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),r="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,r)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target).closest(".btn");e.call(n,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;o||n.data("bs.carousel",o=new i(this,r)),"number"==typeof e?o.to(e):s?o[s]():r.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),r=n||this.getItemForDirection(e,o),s=this.interval,a="next"==e?"left":"right",h=this;if(r.hasClass("active"))return this.sliding=!1;var l=r[0],c=t.Event("slide.bs.carousel",{relatedTarget:l,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(r)]);u&&u.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:l,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,o.addClass(a),r.addClass(a),o.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(d)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),r=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),e.call(r,s),a&&r.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||i.data("bs.collapse",o=new n(this,r)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.7",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"))&&e.transitioning)){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var h=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][h])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var r=e(o),s=r.data("bs.collapse")?"toggle":o.data();i.call(r,s)})}(jQuery),function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(o).each(function(){var n=t(this),o=e(n),r={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))}))}var n=".dropdown-backdrop",o='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.7",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var r=e(o),s=r.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var r=e(n),s=r.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&r.find(o).trigger("focus"),n.trigger("click");var a=r.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var h=a.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<a.length-1&&h++,~h||(h=0),a.eq(h).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);r||o.data("bs.modal",r=new i(this,s)),"string"==typeof e?r[e](n):s.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),r=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,s,this)})}(jQuery),function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",h="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,l=h.test(a);l&&(a=a.replace(h,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),u=r[0].offsetWidth,d=r[0].offsetHeight;if(l){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+d>f.bottom?"top":"top"==a&&c.top-d<f.top?"bottom":"right"==a&&c.right+u>f.width?"left":"left"==a&&c.left-u<f.left?"right":a,r.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,c,u,d);this.applyPlacement(g,a);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var h=n[0].offsetWidth,l=n[0].offsetHeight;"top"==i&&l!=r&&(e.top=e.top+r-l);var c=this.getViewportAdjustedDelta(i,e,h,l);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(i),d=u?2*c.left-o+h:2*c.top-r+l,p=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],u)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){function n(){"in"!=o.hoverState&&r.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),i&&i()}var o=this,r=t(this.$tip),s=t.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(e.TRANSITION_DURATION):n(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=window.SVGElement&&i instanceof window.SVGElement,s=n?{top:0,left:0}:r?null:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},h=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,h,s)},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,h=e.top+r-s.scroll+n;a<s.top?o.top=s.top-a:h>s.top+s.height&&(o.top=s.top+s.height-h)}else{var l=e.left-r,c=e.left+r+i;l<s.left?o.left=s.left-l:c>s.right&&(o.left=s.left+s.width-c)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),r="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.tooltip",o=new e(this,r)),"string"==typeof i&&o[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),o=n.data("bs.popover"),r="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.popover",o=new e(this,r)),"string"==typeof i&&o[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),r="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,r)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=n.find("> .active"),a=o&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),r="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,r)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=r.top)&&"bottom":!(o+s<=t-n)&&"bottom";var a=null==this.affixed,h=a?o:r.top,l=a?s:e;return null!=i&&o<=i?"top":null!=n&&h+l>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,r=n.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(r=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var a=this.getState(s,e,o,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var h="affix"+(a?"-"+a:""),l=t.Event(h+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-r})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),function(){var t,e,i,n,o,r,s,a,h,l,c,u,d,p,f,g,m,v,y,b,x,w,C,I,T,D={}.hasOwnProperty,$=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},E=[].slice;I=Array.prototype.slice,t=function(t,e){return null==e&&(e=document),"object"==typeof t||"undefined"!=typeof exports&&null!==exports?t:e.querySelector(t)},w=function(){function t(){}return t.uniqid=function(){var t;return t=0,{get:function(){return t++}}}(),t.extend=function(t){var e,i,n,o,r,s;for(i=t,r=0,s=(o=I.call(arguments,1)).length;r<s;r++){e=o[r];for(n in e)D.call(e,n)&&(i[n]=e[n])}return i},t.clampRGB=function(t){return t<0?0:t>255?255:t},t.copyAttributes=function(t,e,i){var n,o,r,s,a,h;for(null==i&&(i={}),h=[],o=0,r=(s=t.attributes).length;o<r;o++)n=s[o],null!=i.except&&(a=n.nodeName,$.call(i.except,a)>=0)||h.push(e.setAttribute(n.nodeName,n.nodeValue));return h},t.dataArray=function(t){return null==t&&(t=0),o.NodeJS||null!=window.Uint8Array?new Uint8Array(t):new Array(t)},t}(),"undefined"!=typeof exports&&null!==exports?(b=exports,s=require("canvas"),d=s.Image,l=require("fibers"),C=require("fs")):b=window,b.Caman=o=function(){function i(){var t,n,o,r=this;if(0===arguments.length)throw"Invalid arguments";return this instanceof i?(this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),t=arguments[0],i.NodeJS||(o=parseInt(i.getAttrId(t[0]),10),n="function"==typeof t[1]?t[1]:"function"==typeof t[2]?t[2]:function(){},isNaN(o)||!x.has(o))?(this.id=w.uniqid.get(),this.initializedPixelData=this.originalPixelData=null,this.cropCoordinates={x:0,y:0},this.cropped=!1,this.resized=!1,this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new e(this),this.renderer=new y(this),this.domIsLoaded(function(){return r.parseArguments(t),r.setup()}),this):x.execute(o,n)):new i(arguments)}return i.version={release:"4.1.1",date:"4/8/2013"},i.DEBUG=!1,i.NodeJS="undefined"!=typeof exports&&null!==exports,i.autoload=!i.NodeJS,i.allowRevert=!0,i.crossOrigin="anonymous",i.toString=function(){return"Version "+i.version.release+", Released "+i.version.date},i.remoteProxy="",i.proxyParam="camanProxyUrl",i.getAttrId=function(e){return!!i.NodeJS||("string"==typeof e&&(e=t(e)),null==e||null==e.getAttribute?null:e.getAttribute("data-caman-id"))},i.prototype.domIsLoaded=function(t){var e,n=this;return i.NodeJS?setTimeout(function(){return t.call(n)},0):"complete"===document.readyState?(f.debug("DOM initialized"),setTimeout(function(){return t.call(n)},0)):(e=function(){if("complete"===document.readyState)return f.debug("DOM initialized"),t.call(n)},document.addEventListener("readystatechange",e,!1))},i.prototype.parseArguments=function(t){var e,i,n,o;if(0===t.length)throw"Invalid arguments given";if(this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(t[0]),1!==t.length){switch(typeof t[1]){case"string":this.imageUrl=t[1];break;case"function":this.callback=t[1]}if(2!==t.length&&(this.callback=t[2],4===t.length)){n=t[4],o=[];for(e in n)D.call(n,e)&&(i=n[e],o.push(this.options[e]=i));return o}}},i.prototype.setInitObject=function(e){if(i.NodeJS)return this.initObj=e,void(this.initType="node");if(this.initObj="object"==typeof e?e:t(e),null==this.initObj)throw"Could not find image or canvas for initialization.";return this.initType=this.initObj.nodeName.toLowerCase()},i.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},i.prototype.initNode=function(){var t=this;return f.debug("Initializing for NodeJS"),this.image=new d,this.image.onload=function(){return f.debug("Image loaded. Width = "+t.imageWidth()+", Height = "+t.imageHeight()),t.canvas=new s(t.imageWidth(),t.imageHeight()),t.finishInit()},this.image.onerror=function(t){throw t},this.image.src=this.initObj},i.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),w.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},i.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),null!=this.imageUrl?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},i.prototype.imageAdjustments=function(){if(this.needsHiDPISwap()&&(f.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement()),u.isRemote(this.image))return this.image.src=u.proxyUrl(this.image.src),f.debug("Remote image detected, using URL = "+this.image.src)},i.prototype.waitForImageLoaded=function(){return this.isImageLoaded()?this.imageLoaded():this.image.onload=this.imageLoaded},i.prototype.isImageLoaded=function(){return!!this.image.complete&&(null==this.image.naturalWidth||0!==this.image.naturalWidth)},i.prototype.imageWidth=function(){return this.image.width||this.image.naturalWidth},i.prototype.imageHeight=function(){return this.image.height||this.image.naturalHeight},i.prototype.imageLoaded=function(){return f.debug("Image loaded. Width = "+this.imageWidth()+", Height = "+this.imageHeight()),this.swapped?(this.canvas.width=this.imageWidth()/this.hiDPIRatio(),this.canvas.height=this.imageHeight()/this.hiDPIRatio()):(this.canvas.width=this.imageWidth(),this.canvas.height=this.imageHeight()),this.finishInit()},i.prototype.finishInit=function(){var t,e,n,o,r;if(null==this.context&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.preScaledWidth=this.width=this.canvas.width,this.originalHeight=this.preScaledHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.hasId()||this.assignId(),null!=this.image&&this.context.drawImage(this.image,0,0,this.imageWidth(),this.imageHeight(),0,0,this.preScaledWidth,this.preScaledHeight),this.reloadCanvasData(),i.allowRevert)for(this.initializedPixelData=w.dataArray(this.pixelData.length),this.originalPixelData=w.dataArray(this.pixelData.length),t=n=0,o=(r=this.pixelData).length;n<o;t=++n)e=r[t],this.initializedPixelData[t]=e,this.originalPixelData[t]=e;return this.dimensions={width:this.canvas.width,height:this.canvas.height},x.put(this.id,this),this.callback.call(this,this),this.callback=function(){}},i.prototype.reloadCanvasData=function(){return this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data},i.prototype.resetOriginalPixelData=function(){var t,e,n,o,r;if(!i.allowRevert)throw"Revert disabled";for(this.originalPixelData=w.dataArray(this.pixelData.length),r=[],e=0,n=(o=this.pixelData).length;e<n;e++)t=o[e],r.push(this.originalPixelData.push(t));return r},i.prototype.hasId=function(){return null!=i.getAttrId(this.canvas)},i.prototype.assignId=function(){if(!i.NodeJS&&!this.canvas.getAttribute("data-caman-id"))return this.canvas.setAttribute("data-caman-id",this.id)},i.prototype.hiDPIDisabled=function(){return null!==this.canvas.getAttribute("data-caman-hidpi-disabled")},i.prototype.hiDPIAdjustments=function(){var t;if(!i.NodeJS&&!this.hiDPIDisabled())return 1!==(t=this.hiDPIRatio())?(f.debug("HiDPI ratio = "+t),this.scaled=!0,this.preScaledWidth=this.canvas.width,this.preScaledHeight=this.canvas.height,this.canvas.width=this.preScaledWidth*t,this.canvas.height=this.preScaledHeight*t,this.canvas.style.width=this.preScaledWidth+"px",this.canvas.style.height=this.preScaledHeight+"px",this.context.scale(t,t),this.width=this.originalWidth=this.canvas.width,this.height=this.originalHeight=this.canvas.height):void 0},i.prototype.hiDPIRatio=function(){var t,e;return e=window.devicePixelRatio||1,t=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,e/t},i.prototype.hiDPICapable=function(){return null!=window.devicePixelRatio&&1!==window.devicePixelRatio},i.prototype.needsHiDPISwap=function(){return!(this.hiDPIDisabled()||!this.hiDPICapable())&&null!==this.hiDPIReplacement()},i.prototype.hiDPIReplacement=function(){return null==this.image?null:this.image.getAttribute("data-caman-hidpi")},i.prototype.replaceCanvas=function(t){var e;return e=this.canvas,this.canvas=t,this.context=this.canvas.getContext("2d"),e.parentNode.replaceChild(this.canvas,e),this.width=this.canvas.width,this.height=this.canvas.height,this.reloadCanvasData(),this.dimensions={width:this.canvas.width,height:this.canvas.height}},i.prototype.render=function(t){var e=this;return null==t&&(t=function(){}),h.trigger(this,"renderStart"),this.renderer.execute(function(){return e.context.putImageData(e.imageData,0,0),t.call(e)})},i.prototype.revert=function(){var t,e,n,o,r;if(!i.allowRevert)throw"Revert disabled";for(t=n=0,o=(r=this.originalVisiblePixels()).length;n<o;t=++n)e=r[t],this.pixelData[t]=e;return this.context.putImageData(this.imageData,0,0)},i.prototype.reset=function(){var t,e,i,n,o,r,s,a,h;for(t=document.createElement("canvas"),w.copyAttributes(this.canvas,t),t.width=this.originalWidth,t.height=this.originalHeight,r=(n=(e=t.getContext("2d")).getImageData(0,0,t.width,t.height)).data,i=s=0,a=(h=this.initializedPixelData).length;s<a;i=++s)o=h[i],r[i]=o;return e.putImageData(n,0,0),this.cropCoordinates={x:0,y:0},this.resized=!1,this.replaceCanvas(t)},i.prototype.originalVisiblePixels=function(){var t,e,n,o,r,s,a,h,l,c,u,d,p,f,g,v,y,b,x,w,C;if(!i.allowRevert)throw"Revert disabled";if(c=[],d=this.cropCoordinates.x,o=d+this.width,p=this.cropCoordinates.y,r=p+this.height,this.resized){for((t=document.createElement("canvas")).width=this.originalWidth,t.height=this.originalHeight,l=(a=(n=t.getContext("2d")).getImageData(0,0,t.width,t.height)).data,s=g=0,y=(b=this.originalPixelData).length;g<y;s=++g)h=b[s],l[s]=h;n.putImageData(a,0,0),(u=document.createElement("canvas")).width=this.width,u.height=this.height,(n=u.getContext("2d")).drawImage(t,0,0,this.originalWidth,this.originalHeight,0,0,this.width,this.height),l=n.getImageData(0,0,this.width,this.height).data,f=this.width}else l=this.originalPixelData,f=this.originalWidth;for(s=v=0,x=l.length;v<x;s=v+=4)d<=(w=(e=m.locationToCoordinates(s,f)).x)&&w<o&&p<=(C=e.y)&&C<r&&c.push(l[s],l[s+1],l[s+2],l[s+3]);return c},i.prototype.process=function(t,e){return this.renderer.add({type:c.Type.Single,name:t,processFn:e}),this},i.prototype.processKernel=function(t,e,i,n){var o,r,s;if(!i)for(i=0,o=r=0,s=e.length;0<=s?r<s:r>s;o=0<=s?++r:--r)i+=e[o];return this.renderer.add({type:c.Type.Kernel,name:t,adjust:e,divisor:i,bias:n||0}),this},i.prototype.processPlugin=function(t,e){return this.renderer.add({type:c.Type.Plugin,plugin:t,args:e}),this},i.prototype.newLayer=function(t){var e;return e=new p(this),this.canvasQueue.push(e),this.renderer.add({type:c.Type.LayerDequeue}),t.call(e),this.renderer.add({type:c.Type.LayerFinished}),this},i.prototype.executeLayer=function(t){return this.pushContext(t)},i.prototype.pushContext=function(t){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=t,this.pixelData=t.pixelData},i.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},i.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},i}(),e=function(){function t(t){this.c=t}return t.prototype.calculateLevels=function(){var t,e,i,n,o,r,s;for(e={r:{},g:{},b:{}},t=n=0;n<=255;t=++n)e.r[t]=0,e.g[t]=0,e.b[t]=0;for(t=o=0,s=this.c.pixelData.length;o<s;t=o+=4)e.r[this.c.pixelData[t]]++,e.g[this.c.pixelData[t+1]]++,e.b[this.c.pixelData[t+2]]++;for(i=this.c.pixelData.length/4,t=r=0;r<=255;t=++r)e.r[t]/=i,e.g[t]/=i,e.b[t]/=i;return e},t}(),o.DOMUpdated=function(){var t,e,i,n,o;if((e=document.querySelectorAll("img[data-caman]")).length>0){for(o=[],i=0,n=e.length;i<n;i++)t=e[i],o.push(new r(t,function(){return this.parse(),this.execute()}));return o}},o.autoload&&("complete"===document.readyState?o.DOMUpdated():document.addEventListener("DOMContentLoaded",o.DOMUpdated,!1)),r=function(){function t(t,e){this.dataStr=t.getAttribute("data-caman"),this.caman=o(t,e.bind(this))}return"(\\w+)\\((.*?)\\)",t.prototype.parse=function(){var t,e,i,n,o,r,s,a,h,l;if(this.ele=this.caman.canvas,o=new RegExp("(\\w+)\\((.*?)\\)","g"),(r=this.dataStr.match(o)).length>0){for(o=new RegExp("(\\w+)\\((.*?)\\)"),l=[],s=0,a=r.length;s<a;s++){(h=r[s].match(o))[0],e=h[1],t=h[2],n=new Function("return function() {        this."+e+"("+t+");      };");try{i=n(),l.push(i.call(this.caman))}catch(t){l.push(f.debug(t))}}return l}},t.prototype.execute=function(){var t;return t=this.ele,this.caman.render(function(){return t.parentNode.replaceChild(this.toImage(),t)})},t}(),o.Blender=i=function(){function t(){}return t.blenders={},t.register=function(t,e){return this.blenders[t]=e},t.execute=function(t,e,i){return this.blenders[t](e,i)},t}(),o.Calculate=n=function(){function t(){}return t.distance=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},t.randomRange=function(t,e,i){var n;return null==i&&(i=!1),n=t+Math.random()*(e-t),i?n.toFixed(i):Math.round(n)},t.luminance=function(t){return.299*t.r+.587*t.g+.114*t.b},t.bezier=function(t,e,i,n,o,r){var s,a,h,l,c,u,d,p,f,g,m,v,y,b,x,w,C,I,T,D,$,E,S,k,R,B,L;for(x=t[0],T=t[1],w=e[0],D=e[1],C=i[0],$=i[1],I=n[0],E=n[1],d={},s=I-x-(c=parseInt(3*(w-x),10))-(h=3*(C-w)-c),a=E-T-(u=3*(D-T))-(l=3*($-D)-u),g=S=0;S<1e3;g=++S)b=g/1e3,p=Math.round(s*Math.pow(b,3)+h*Math.pow(b,2)+c*b+x),f=Math.round(a*Math.pow(b,3)+l*Math.pow(b,2)+u*b+T),o&&f<o?f=o:r&&f>r&&(f=r),d[p]=f;if(d.length<n[0]+1)for(g=k=0,B=n[0];0<=B?k<=B:k>=B;g=0<=B?++k:--k)if(null==d[g]){for(v=[g-1,d[g-1]],m=R=g,L=n[0];g<=L?R<=L:R>=L;m=g<=L?++R:--R)if(null!=d[m]){y=[m,d[m]];break}d[g]=v[1]+(y[1]-v[1])/(y[0]-v[0])*(g-v[0])}return null==d[n[0]]&&(d[n[0]]=d[n[0]-1]),d},t}(),a=function(){function t(){}return t.hexToRGB=function(t){var e,i,n;return"#"===t.charAt(0)&&(t=t.substr(1)),n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),e=parseInt(t.substr(4,2),16),{r:n,g:i,b:e}},t.rgbToHSL=function(t,e,i){var n,o,r,s,a,h;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),t/=255,e/=255,i/=255,s=Math.max(t,e,i),a=Math.min(t,e,i),r=(s+a)/2,s===a?o=h=0:(n=s-a,h=r>.5?n/(2-s-a):n/(s+a),o=function(){switch(s){case t:return(e-i)/n+(e<i?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),o/=6),{h:o,s:h,l:r}},t.hslToRGB=function(t,e,i){var n,o,r,s,a;return"object"==typeof t&&(e=t.s,i=t.l,t=t.h),0===e?a=o=n=i:(r=2*i-(s=i<.5?i*(1+e):i+e-i*e),a=this.hueToRGB(r,s,t+1/3),o=this.hueToRGB(r,s,t),n=this.hueToRGB(r,s,t-1/3)),{r:255*a,g:255*o,b:255*n}},t.hueToRGB=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t.rgbToHSV=function(t,e,i){var n,o,r,s,a,h;return t/=255,e/=255,i/=255,r=Math.max(t,e,i),s=Math.min(t,e,i),h=r,n=r-s,a=0===r?0:n/r,r===s?o=0:(o=function(){switch(r){case t:return(e-i)/n+(e<i?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),o/=6),{h:o,s:a,v:h}},t.hsvToRGB=function(t,e,i){var n,o,r,s,a,h,l,c;switch(s=Math.floor(6*t),o=6*t-s,a=i*(1-e),h=i*(1-o*e),c=i*(1-(1-o)*e),s%6){case 0:l=i,r=c,n=a;break;case 1:l=h,r=i,n=a;break;case 2:l=a,r=i,n=c;break;case 3:l=a,r=h,n=i;break;case 4:l=c,r=a,n=i;break;case 5:l=i,r=a,n=h}return{r:255*l,g:255*r,b:255*n}},t.rgbToXYZ=function(t,e,i){var n,o,r;return t/=255,e/=255,i/=255,t>.04045?t=Math.pow((t+.055)/1.055,2.4):t/=12.92,e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,n=.4124*t+.3576*e+.1805*i,o=.2126*t+.7152*e+.0722*i,r=.0193*t+.1192*e+.9505*i,{x:100*n,y:100*o,z:100*r}},t.xyzToRGB=function(t,e,i){var n,o,r;return t/=100,e/=100,i/=100,r=3.2406*t+-1.5372*e+-.4986*i,o=-.9689*t+1.8758*e+.0415*i,n=.0557*t+-.204*e+1.057*i,r>.0031308?r=1.055*Math.pow(r,.4166666667)-.055:r*=12.92,o>.0031308?o=1.055*Math.pow(o,.4166666667)-.055:o*=12.92,n>.0031308?n=1.055*Math.pow(n,.4166666667)-.055:n*=12.92,{r:255*r,g:255*o,b:255*n}},t.xyzToLab=function(t,e,i){var n,o,r;return"object"==typeof t&&(e=t.y,i=t.z,t=t.x),95.047,100,108.883,t/=95.047,e/=100,i/=108.883,t=t>.008856451679?Math.pow(t,.3333333333):7.787037037*t+.1379310345,e=e>.008856451679?Math.pow(e,.3333333333):7.787037037*e+.1379310345,i=i>.008856451679?Math.pow(i,.3333333333):7.787037037*i+.1379310345,r=116*e-16,n=500*(t-e),o=200*(e-i),{l:r,a:n,b:o}},t.labToXYZ=function(t,e,i){var n,o,r;return"object"==typeof t&&(e=t.a,i=t.b,t=t.l),o=(t+16)/116,n=o+e/500,r=o-i/200,n>.2068965517?n*=n*n:n=.1284185493*(n-.1379310345),o>.2068965517?o*=o*o:o=.1284185493*(o-.1379310345),r>.2068965517?r*=r*r:r=.1284185493*(r-.1379310345),{x:95.047*n,y:100*o,z:108.883*r}},t.rgbToLab=function(t,e,i){var n;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),n=this.rgbToXYZ(t,e,i),this.xyzToLab(n)},t.labToRGB=function(t,e,i){},t}(),h=function(){function t(){}return t.events={},t.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],t.trigger=function(t,e,i){var n,o,r,s,a;if(this.events[e]&&this.events[e].length){for(a=[],o=0,r=(s=this.events[e]).length;o<r;o++)null===(n=s[o]).target||t.id===n.target.id?a.push(n.fn.call(t,i)):a.push(void 0);return a}},t.listen=function(t,e,i){var n,o;return"string"==typeof t&&(o=t,n=e,t=null,e=o,i=n),!($.call(this.types,e)<0)&&(this.events[e]||(this.events[e]=[]),this.events[e].push({target:t,fn:i}),!0)},t}(),o.Event=h,o.Filter=c=function(){function t(){}return t.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},t.register=function(t,e){return o.prototype[t]=e},t}(),o.IO=u=function(){function t(){}return t.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,t.isRemote=function(t){return null!=t&&(!this.corsEnabled(t)&&this.isURLRemote(t.src))},t.corsEnabled=function(t){var e;return null!=t.crossOrigin&&("anonymous"===(e=t.crossOrigin.toLowerCase())||"use-credentials"===e)},t.isURLRemote=function(t){var e;return!!(e=t.match(this.domainRegex))&&e[1]!==document.domain},t.remoteCheck=function(t){if(this.isURLRemote(t)){if(o.remoteProxy.length)return o.isURLRemote(o.remoteProxy)?void f.info("Cannot use a remote proxy for loading images."):o.remoteProxy+"?camanProxyUrl="+encodeURIComponent(t);f.info("Attempting to load a remote image without a configured proxy. URL: "+t)}},t.proxyUrl=function(t){return o.remoteProxy+"?"+o.proxyParam+"="+encodeURIComponent(t)},t.useProxy=function(t){var e;return e={ruby:"rb",python:"py",perl:"pl",javascript:"js"},t=t.toLowerCase(),null!=e[t]&&(t=e[t]),"proxies/caman_proxy."+t},t}(),o.prototype.save=function(){return"undefined"!=typeof exports&&null!==exports?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},o.prototype.browserSave=function(t){var e;return null==t&&(t="png"),t=t.toLowerCase(),e=this.toBase64(t).replace("image/"+t,"image/octet-stream"),document.location.href=e},o.prototype.nodeSave=function(t,e){null==e&&(e=!0);try{if(C.statSync(t).isFile()&&!e)return!1}catch(e){f.debug("Creating output file "+t)}return C.writeFile(t,this.canvas.toBuffer(),function(){return f.debug("Finished writing to "+t)})},o.prototype.toImage=function(t){var e;return e=document.createElement("img"),e.src=this.toBase64(t),e.width=this.dimensions.width,e.height=this.dimensions.height,window.devicePixelRatio&&(e.width/=window.devicePixelRatio,e.height/=window.devicePixelRatio),e},o.prototype.toBase64=function(t){return null==t&&(t="png"),t=t.toLowerCase(),this.canvas.toDataURL("image/"+t)},p=function(){function e(t){this.c=t,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=w.uniqid.get(),this.canvas="undefined"!=typeof exports&&null!==exports?new s:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return e.prototype.newLayer=function(t){return this.c.newLayer.call(this.c,t)},e.prototype.setBlendingMode=function(t){return this.options.blendingMode=t,this},e.prototype.opacity=function(t){return this.options.opacity=t/100,this},e.prototype.copyParent=function(){var t,e,i,n;for(e=this.c.pixelData,t=i=0,n=this.c.pixelData.length;i<n;t=i+=4)this.pixelData[t]=e[t],this.pixelData[t+1]=e[t+1],this.pixelData[t+2]=e[t+2],this.pixelData[t+3]=e[t+3];return this},e.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},e.prototype.overlayImage=function(e){return"object"==typeof e?e=e.src:"string"==typeof e&&"#"===e[0]&&(e=t(e).src),e?(this.c.renderer.renderQueue.push({type:c.Type.LoadOverlay,src:e,layer:this}),this):this},e.prototype.applyToParent=function(){var t,e,n,o,r,s,a,h,l;for(n=this.c.pixelStack[this.c.pixelStack.length-1],l=[],t=a=0,h=(e=this.c.pixelData).length;a<h;t=a+=4)s={r:n[t],g:n[t+1],b:n[t+2],a:n[t+3]},r={r:e[t],g:e[t+1],b:e[t+2],a:e[t+3]},(o=i.execute(this.options.blendingMode,r,s)).r=w.clampRGB(o.r),o.g=w.clampRGB(o.g),o.b=w.clampRGB(o.b),null==o.a&&(o.a=r.a),n[t]=s.r-(s.r-o.r)*(this.options.opacity*(o.a/255)),n[t+1]=s.g-(s.g-o.g)*(this.options.opacity*(o.a/255)),l.push(n[t+2]=s.b-(s.b-o.b)*(this.options.opacity*(o.a/255)));return l},e}(),g=function(){return function(){var t,e,i,n;for(e=0,i=(n=["log","info","warn","error"]).length;e<i;e++)this[t=n[e]]=function(t){return function(){var e;if(e=1<=arguments.length?E.call(arguments,0):[],o.DEBUG)try{return console[t].apply(console,e)}catch(i){return console[t](e)}}}(t);this.debug=this.log}}(),f=new g,m=function(){function t(t){this.c=t,this.loc=0}return t.coordinatesToLocation=function(t,e,i){return 4*(e*i+t)},t.locationToCoordinates=function(t,e){var i,n;return n=Math.floor(t/(4*e)),i=t%(4*e)/4,{x:i,y:n}},t.prototype.locationXY=function(){var t,e;return e=this.c.dimensions.height-Math.floor(this.loc/(4*this.c.dimensions.width)),t=this.loc%(4*this.c.dimensions.width)/4,{x:t,y:e}},t.prototype.getPixelRelative=function(t,e){var i;return(i=this.loc+4*this.c.dimensions.width*(-1*e)+4*t)>this.c.pixelData.length||i<0?{r:0,g:0,b:0,a:0}:{r:this.c.pixelData[i],g:this.c.pixelData[i+1],b:this.c.pixelData[i+2],a:this.c.pixelData[i+3]}},t.prototype.putPixelRelative=function(t,e,i){if(this.loc+4*this.c.dimensions.width*(-1*e)+4*t,!(newLoc>this.c.pixelData.length||newLoc<0))return this.c.pixelData[newLoc]=i.r,this.c.pixelData[newLoc+1]=i.g,this.c.pixelData[newLoc+2]=i.b,this.c.pixelData[newLoc+3]=i.a,!0},t.prototype.getPixel=function(t,e){var i;return i=this.coordinatesToLocation(t,e,this.width),{r:this.c.pixelData[i],g:this.c.pixelData[i+1],b:this.c.pixelData[i+2],a:this.c.pixelData[i+3]}},t.prototype.putPixel=function(t,e,i){var n;return n=this.coordinatesToLocation(t,e,this.width),this.c.pixelData[n]=i.r,this.c.pixelData[n+1]=i.g,this.c.pixelData[n+2]=i.b,this.c.pixelData[n+3]=i.a},t}(),v=function(){function t(){}return t.plugins={},t.register=function(t,e){return this.plugins[t]=e},t.execute=function(t,e,i){return this.plugins[e].apply(t,i)},t}(),o.Plugin=v,o.Renderer=y=function(){function t(e){var i=this;this.c=e,this.processNext=function(){return t.prototype.processNext.apply(i,arguments)},this.renderQueue=[],this.modPixelData=null}return t.Blocks=o.NodeJS?require("os").cpus().length:4,t.prototype.add=function(t){if(null!=t)return this.renderQueue.push(t)},t.prototype.processNext=function(){var t;if(0===this.renderQueue.length)return h.trigger(this,"renderFinished"),null!=this.finishedFn&&this.finishedFn.call(this.c),this;switch(this.currentJob=this.renderQueue.shift(),this.currentJob.type){case c.Type.LayerDequeue:return t=this.c.canvasQueue.shift(),this.c.executeLayer(t),this.processNext();case c.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case c.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case c.Type.Plugin:return this.executePlugin();default:return this.executeFilter()}},t.prototype.execute=function(t){return this.finishedFn=t,this.modPixelData=w.dataArray(this.c.pixelData.length),this.processNext()},t.prototype.eachBlock=function(e){var i,n,r,s,a,h,c,u,d,p,f=this;for(this.blocksDone=0,h=this.c.pixelData.length,a=(i=4*Math.floor(h/4/t.Blocks))+h/4%t.Blocks*4,p=[],s=u=0,d=t.Blocks;0<=d?u<d:u>d;s=0<=d?++u:--u)r=(c=s*i)+(s===t.Blocks-1?a:i),o.NodeJS?(n=l(function(){return e.call(f,s,c,r)}).run(),p.push(this.blockFinished(n))):p.push(setTimeout(function(t,i,n){return function(){return e.call(f,t,i,n)}}(s,c,r),0));return p},t.prototype.executeFilter=function(){return h.trigger(this.c,"processStart",this.currentJob),this.currentJob.type===c.Type.Single?this.eachBlock(this.renderBlock):this.eachBlock(this.renderKernel)},t.prototype.executePlugin=function(){return f.debug("Executing plugin "+this.currentJob.plugin),v.execute(this.c,this.currentJob.plugin,this.currentJob.args),f.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},t.prototype.renderBlock=function(e,i,n){var r,s,a,c,u;for(f.debug("Block #"+e+" - Filter: "+this.currentJob.name+", Start: "+i+", End: "+n),h.trigger(this.c,"blockStarted",{blockNum:e,totalBlocks:t.Blocks,startPixel:i,endPixel:n}),r={r:0,g:0,b:0,a:0},a=new m(this.c),s=u=i;u<n;s=u+=4)a.loc=s,r.r=this.c.pixelData[s],r.g=this.c.pixelData[s+1],r.b=this.c.pixelData[s+2],r.a=this.c.pixelData[s+3],null==(c=this.currentJob.processFn.call(a,r)).a&&(c.a=r.a),this.c.pixelData[s]=w.clampRGB(c.r),this.c.pixelData[s+1]=w.clampRGB(c.g),this.c.pixelData[s+2]=w.clampRGB(c.b),this.c.pixelData[s+3]=w.clampRGB(c.a);return o.NodeJS?l.yield(e):this.blockFinished(e)},t.prototype.renderKernel=function(t,e,i){var n,r,s,a,h,c,u,d,p,g,v,y,b,x,C,I,T;for(this.currentJob.name,s=this.currentJob.bias,c=this.currentJob.divisor,v=this.c.pixelData.length,n=this.currentJob.adjust,r=Math.sqrt(n.length),g=[],f.debug("Rendering kernel - Filter: "+this.currentJob.name),e=Math.max(e,4*this.c.dimensions.width*((r-1)/2)),i=Math.min(i,v-4*this.c.dimensions.width*((r-1)/2)),a=(r-1)/2,b=new m(this.c),u=C=e;C<i;u=C+=4){for(b.loc=u,h=0,d=I=-a;-a<=a?I<=a:I>=a;d=-a<=a?++I:--I)for(p=T=a;a<=-a?T<=-a:T>=-a;p=a<=-a?++T:--T)y=b.getPixelRelative(d,p),g[3*h]=y.r,g[3*h+1]=y.g,g[3*h+2]=y.b,h++;x=this.processKernel(n,g,c,s),this.modPixelData[u]=w.clampRGB(x.r),this.modPixelData[u+1]=w.clampRGB(x.g),this.modPixelData[u+2]=w.clampRGB(x.b),this.modPixelData[u+3]=this.c.pixelData[u+3]}return o.NodeJS?l.yield(t):this.blockFinished(t)},t.prototype.blockFinished=function(e){var i,n,o;if(e>=0&&f.debug("Block #"+e+" finished! Filter: "+this.currentJob.name),this.blocksDone++,h.trigger(this.c,"blockFinished",{blockNum:e,blocksFinished:this.blocksDone,totalBlocks:t.Blocks}),this.blocksDone===t.Blocks){if(this.currentJob.type===c.Type.Kernel)for(i=n=0,o=this.c.pixelData.length;0<=o?n<o:n>o;i=0<=o?++n:--n)this.c.pixelData[i]=this.modPixelData[i];return e>=0&&f.debug("Filter "+this.currentJob.name+" finished!"),h.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},t.prototype.processKernel=function(t,e,i,n){var o,r,s,a;for(r={r:0,g:0,b:0},o=s=0,a=t.length;0<=a?s<a:s>a;o=0<=a?++s:--s)r.r+=t[o]*e[3*o],r.g+=t[o]*e[3*o+1],r.b+=t[o]*e[3*o+2];return r.r=r.r/i+n,r.g=r.g/i+n,r.b=r.b/i+n,r},t.prototype.loadOverlay=function(t,e){var i,n,o=this;return i=document.createElement("img"),i.onload=function(){return t.context.drawImage(i,0,0,o.c.dimensions.width,o.c.dimensions.height),t.imageData=t.context.getImageData(0,0,o.c.dimensions.width,o.c.dimensions.height),t.pixelData=t.imageData.data,o.c.pixelData=t.pixelData,o.processNext()},n=u.remoteCheck(e),i.src=null!=n?n:e},t}(),o.Store=x=function(){function t(){}return t.items={},t.has=function(t){return null!=this.items[t]},t.get=function(t){return this.items[t]},t.put=function(t,e){return this.items[t]=e},t.execute=function(t,e){var i=this;return setTimeout(function(){return e.call(i.get(t),i.get(t))},0),this.get(t)},t.flush=function(t){return null==t&&(t=!1),t?delete this.items[t]:this.items={}},t}(),i.register("normal",function(t,e){return{r:t.r,g:t.g,b:t.b}}),i.register("multiply",function(t,e){return{r:t.r*e.r/255,g:t.g*e.g/255,b:t.b*e.b/255}}),i.register("screen",function(t,e){return{r:255-(255-t.r)*(255-e.r)/255,g:255-(255-t.g)*(255-e.g)/255,b:255-(255-t.b)*(255-e.b)/255}}),i.register("overlay",function(t,e){var i;return i={},i.r=e.r>128?255-2*(255-t.r)*(255-e.r)/255:e.r*t.r*2/255,i.g=e.g>128?255-2*(255-t.g)*(255-e.g)/255:e.g*t.g*2/255,i.b=e.b>128?255-2*(255-t.b)*(255-e.b)/255:e.b*t.b*2/255,i}),i.register("difference",function(t,e){return{r:t.r-e.r,g:t.g-e.g,b:t.b-e.b}}),i.register("addition",function(t,e){return{r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}}),i.register("exclusion",function(t,e){return{r:128-2*(e.r-128)*(t.r-128)/255,g:128-2*(e.g-128)*(t.g-128)/255,b:128-2*(e.b-128)*(t.b-128)/255}}),i.register("softLight",function(t,e){var i;return i={},i.r=e.r>128?255-(255-e.r)*(255-(t.r-128))/255:e.r*(t.r+128)/255,i.g=e.g>128?255-(255-e.g)*(255-(t.g-128))/255:e.g*(t.g+128)/255,i.b=e.b>128?255-(255-e.b)*(255-(t.b-128))/255:e.b*(t.b+128)/255,i}),i.register("lighten",function(t,e){return{r:e.r>t.r?e.r:t.r,g:e.g>t.g?e.g:t.g,b:e.b>t.b?e.b:t.b}}),i.register("darken",function(t,e){return{r:e.r>t.r?t.r:e.r,g:e.g>t.g?t.g:e.g,b:e.b>t.b?t.b:e.b}}),c.register("fillColor",function(){var t;return t=1===arguments.length?a.hexToRGB(arguments[0]):{r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(e){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=255,e})}),c.register("brightness",function(t){return t=Math.floor(t/100*255),this.process("brightness",function(e){return e.r+=t,e.g+=t,e.b+=t,e})}),c.register("saturation",function(t){return t*=-.01,this.process("saturation",function(e){var i;return i=Math.max(e.r,e.g,e.b),e.r!==i&&(e.r+=(i-e.r)*t),e.g!==i&&(e.g+=(i-e.g)*t),e.b!==i&&(e.b+=(i-e.b)*t),e})}),c.register("vibrance",function(t){return t*=-1,this.process("vibrance",function(e){var i,n,o;return o=Math.max(e.r,e.g,e.b),n=(e.r+e.g+e.b)/3,i=2*Math.abs(o-n)/255*t/100,e.r!==o&&(e.r+=(o-e.r)*i),e.g!==o&&(e.g+=(o-e.g)*i),e.b!==o&&(e.b+=(o-e.b)*i),e})}),c.register("greyscale",function(t){return this.process("greyscale",function(t){var e;return e=n.luminance(t),t.r=e,t.g=e,t.b=e,t})}),c.register("contrast",function(t){return t=Math.pow((t+100)/100,2),this.process("contrast",function(e){return e.r/=255,e.r-=.5,e.r*=t,e.r+=.5,e.r*=255,e.g/=255,e.g-=.5,e.g*=t,e.g+=.5,e.g*=255,e.b/=255,e.b-=.5,e.b*=t,e.b+=.5,e.b*=255,e})}),c.register("hue",function(t){return this.process("hue",function(e){var i,n,o;return n=a.rgbToHSV(e.r,e.g,e.b),i=100*n.h,i+=Math.abs(t),i%=100,i/=100,n.h=i,o=a.hsvToRGB(n.h,n.s,n.v),o.a=e.a,o})}),c.register("colorize",function(){var t,e;return 2===arguments.length?(e=a.hexToRGB(arguments[0]),t=arguments[1]):4===arguments.length&&(e={r:arguments[0],g:arguments[1],b:arguments[2]},t=arguments[3]),this.process("colorize",function(i){return i.r-=(i.r-e.r)*(t/100),i.g-=(i.g-e.g)*(t/100),i.b-=(i.b-e.b)*(t/100),i})}),c.register("invert",function(){return this.process("invert",function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,t})}),c.register("sepia",function(t){return null==t&&(t=100),t/=100,this.process("sepia",function(e){return e.r=Math.min(255,e.r*(1-.607*t)+e.g*(.769*t)+e.b*(.189*t)),e.g=Math.min(255,e.r*(.349*t)+e.g*(1-.314*t)+e.b*(.168*t)),e.b=Math.min(255,e.r*(.272*t)+e.g*(.534*t)+e.b*(1-.869*t)),e})}),c.register("gamma",function(t){return this.process("gamma",function(e){return e.r=255*Math.pow(e.r/255,t),e.g=255*Math.pow(e.g/255,t),e.b=255*Math.pow(e.b/255,t),e})}),c.register("noise",function(t){return t=2.55*Math.abs(t),this.process("noise",function(e){var i;return i=n.randomRange(-1*t,t),e.r+=i,e.g+=i,e.b+=i,e})}),c.register("clip",function(t){return t=2.55*Math.abs(t),this.process("clip",function(e){return e.r>255-t?e.r=255:e.r<t&&(e.r=0),e.g>255-t?e.g=255:e.g<t&&(e.g=0),e.b>255-t?e.b=255:e.b<t&&(e.b=0),e})}),c.register("channels",function(t){var e;if("object"!=typeof t)return this;for(e in t)D.call(t,e)&&(0!==t[e]?t[e]/=100:delete t[e]);return 0===t.length?this:this.process("channels",function(e){return null!=t.red&&(t.red>0?e.r+=(255-e.r)*t.red:e.r-=e.r*Math.abs(t.red)),null!=t.green&&(t.green>0?e.g+=(255-e.g)*t.green:e.g-=e.g*Math.abs(t.green)),null!=t.blue&&(t.blue>0?e.b+=(255-e.b)*t.blue:e.b-=e.b*Math.abs(t.blue)),e})}),c.register("curves",function(){var t,e,i,o,r,s,a,h,l,c,u,d;if(e=arguments[0],i=2<=arguments.length?E.call(arguments,1):[],"string"==typeof e&&(e=e.split("")),"v"===e[0]&&(e=["r","g","b"]),i.length<3||i.length>4)throw"Invalid number of arguments to curves filter";if(h=i[0],o=i[1],r=4===i.length?i[2]:i[1],s=i[i.length-1],t=n.bezier(h,o,r,s,0,255),h[0]>0)for(a=l=0,u=h[0];0<=u?l<u:l>u;a=0<=u?++l:--l)t[a]=h[1];if(s[0]<255)for(a=c=d=s[0];d<=255?c<=255:c>=255;a=d<=255?++c:--c)t[a]=s[1];return this.process("curves",function(i){var n,o;for(a=n=0,o=e.length;0<=o?n<o:n>o;a=0<=o?++n:--n)i[e[a]]=t[i[e[a]]];return i})}),c.register("exposure",function(t){var e,i,n;return n=Math.abs(t)/100,e=[0,255*n],i=[255-255*n,255],t<0&&(e=e.reverse(),i=i.reverse()),this.curves("rgb",[0,0],e,i,[255,255])}),o.Plugin.register("crop",function(t,e,i,n){var o;return null==i&&(i=0),null==n&&(n=0),"undefined"!=typeof exports&&null!==exports?o=new s(t,e):(o=document.createElement("canvas"),w.copyAttributes(this.canvas,o),o.width=t,o.height=e),o.getContext("2d").drawImage(this.canvas,i,n,t,e,0,0,t,e),this.cropCoordinates={x:i,y:n},this.cropped=!0,this.replaceCanvas(o)}),o.Plugin.register("resize",function(t){var e;null==t&&(t=null);{if(null!==t&&(null!=t.width||null!=t.height))return null==t.width?t.width=this.canvas.width*t.height/this.canvas.height:null==t.height&&(t.height=this.canvas.height*t.width/this.canvas.width),"undefined"!=typeof exports&&null!==exports?e=new s(t.width,t.height):(e=document.createElement("canvas"),w.copyAttributes(this.canvas,e),e.width=t.width,e.height=t.height),e.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,t.width,t.height),this.resized=!0,this.replaceCanvas(e);f.error("Invalid or missing dimensions given for resize")}}),o.Filter.register("crop",function(){return this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),o.Filter.register("resize",function(){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),o.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),o.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),o.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),o.Filter.register("motionBlur",function(t){var e;return e=0===t||180===t?[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:t>0&&t<90||t>180&&t<270?[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:90===t||270===t?[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",e)}),o.Filter.register("sharpen",function(t){return null==t&&(t=100),t/=100,this.processKernel("Sharpen",[0,-t,0,-t,4*t+1,-t,0,-t,0])}),T={brightness:function(t,e,i){return t.r=t.r-t.r*e*i.strength,t.g=t.g-t.g*e*i.strength,t.b=t.b-t.b*e*i.strength,t},gamma:function(t,e,i){return t.r=255*Math.pow(t.r/255,Math.max(10*e*i.strength,1)),t.g=255*Math.pow(t.g/255,Math.max(10*e*i.strength,1)),t.b=255*Math.pow(t.b/255,Math.max(10*e*i.strength,1)),t},colorize:function(t,e,i){return t.r-=(t.r-i.color.r)*e,t.g-=(t.g-i.color.g)*e,t.b-=(t.b-i.color.b)*e,t}},c.register("vignette",function(t,e){var i,o,r,s;return null==e&&(e=60),"string"==typeof t&&"%"===t.substr(-1)&&(t=this.dimensions.height>this.dimensions.width?this.dimensions.width*(parseInt(t.substr(0,t.length-1),10)/100):this.dimensions.height*(parseInt(t.substr(0,t.length-1),10)/100)),e/=100,o=[this.dimensions.width/2,this.dimensions.height/2],s=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)),r=s-t,i=n.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(s){var a,h,l;return l=this.locationXY(),(a=n.distance(l.x,l.y,o[0],o[1]))>r&&(h=Math.max(1,i[Math.round((a-r)/t*100)]/10*e),s.r=255*Math.pow(s.r/255,h),s.g=255*Math.pow(s.g/255,h),s.b=255*Math.pow(s.b/255,h)),s})}),c.register("rectangularVignette",function(t){var e,i,r,s,h,l,c;if(e={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},!(t=w.extend(e,t)).size)return this;if("string"==typeof t.size)r=parseInt(t.size,10)/100,t.size={width:this.dimensions.width*r,height:this.dimensions.height*r};else if("object"==typeof t.size)for(h=0,l=(c=["width","height"]).length;h<l;h++)i=c[h],"string"==typeof t.size[i]&&(t.size[i]=this.dimensions[i]*(parseInt(t.size[i],10)/100));else"number"===t.size&&(s=t.size,t.size={width:s,height:s});return"string"==typeof t.cornerRadius&&(t.cornerRadius=t.size.width/2*(parseInt(t.cornerRadius,10)/100)),t.strength/=100,t.size.width=Math.floor(t.size.width),t.size.height=Math.floor(t.size.height),t.image={width:this.dimensions.width,height:this.dimensions.height},"colorize"===t.method&&"string"==typeof t.color&&(t.color=a.hexToRGB(t.color)),t.coords={left:(this.dimensions.width-t.size.width)/2,right:this.dimensions.width-t.coords.left,bottom:(this.dimensions.height-t.size.height)/2,top:this.dimensions.height-t.coords.bottom},t.corners=[{x:t.coords.left+t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.bottom+t.cornerRadius},{x:t.coords.left+t.cornerRadius,y:t.coords.bottom+t.cornerRadius}],t.maxDist=n.distance(0,0,t.corners[3].x,t.corners[3].y)-t.cornerRadius,this.process("rectangularVignette",function(e){var i,n;return(n=this.locationXY()).x>t.corners[0].x&&n.x<t.corners[1].x&&n.y>t.coords.bottom&&n.y<t.coords.top?e:n.x>t.coords.left&&n.x<t.coords.right&&n.y>t.corners[3].y&&n.y<t.corners[2].y?e:(n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y>t.coords.top?i=(n.y-t.coords.top)/t.maxDist:n.y>t.corners[2].y&&n.y<t.corners[1].y&&n.x>t.coords.right?i=(n.x-t.coords.right)/t.maxDist:n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y<t.coords.bottom?i=(t.coords.bottom-n.y)/t.maxDist:n.y>t.corners[2].y&&n.y<t.corners[1].y&&n.x<t.coords.left?i=(t.coords.left-n.x)/t.maxDist:n.x<=t.corners[0].x&&n.y>=t.corners[0].y?i=(o.distance(n.x,n.y,t.corners[0].x,t.corners[0].y)-t.cornerRadius)/t.maxDist:n.x>=t.corners[1].x&&n.y>=t.corners[1].y?i=(o.distance(n.x,n.y,t.corners[1].x,t.corners[1].y)-t.cornerRadius)/t.maxDist:n.x>=t.corners[2].x&&n.y<=t.corners[2].y?i=(o.distance(n.x,n.y,t.corners[2].x,t.corners[2].y)-t.cornerRadius)/t.maxDist:n.x<=t.corners[3].x&&n.y<=t.corners[3].y&&(i=(o.distance(n.x,n.y,t.corners[3].x,t.corners[3].y)-t.cornerRadius)/t.maxDist),i<0?e:T[t.method](e,i,t))})}),function(){var t,e,i,n,r;n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],e=function(t,e,i,n,o,r,a){var h,l,c,u,d,p,f;return h="undefined"!=typeof exports&&null!==exports?new s:document.createElement("canvas"),h.width=t,h.height=e,u=i+Math.cos(o)*r*.5,p=n+Math.sin(o)*r*.5,d=i-Math.cos(o)*r*.5,f=n-Math.sin(o)*r*.5,l=h.getContext("2d"),c=l.createLinearGradient(u,p,d,f),a?(c.addColorStop(0,"white"),c.addColorStop(.5,"black"),c.addColorStop(1,"white")):(c.addColorStop(0,"white"),c.addColorStop(1,"black")),l.fillStyle=c,l.fillRect(0,0,t,e),l.getImageData(0,0,t,e)},i=function(t,e,i,n,o,r){var a,h,l;return a="undefined"!=typeof exports&&null!==exports?new s:document.createElement("canvas"),a.width=t,a.height=e,h=a.getContext("2d"),(l=h.createRadialGradient(i,n,o,i,n,r)).addColorStop(1,"white"),l.addColorStop(0,"black"),h.fillStyle=l,h.fillRect(0,0,t,e),h.getImageData(0,0,t,e)},t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},o.Plugin.register("compoundBlur",function(e,i,o,s){var a,h,l,c,u,d,p,f,g,m,v,y,b,x,w,C,I,T,D,$,E,S,k,R,B,L,O,A,_,z,P,j,M,W,N,F,H,Y,U,X,Q,q,V,J,G,K,Z,tt,et,it,nt,ot,rt,st,at,ht,lt;for(Q=this.dimensions.width,m=this.dimensions.height,w=this.pixelData,A=e.data,X=(U=Q*m)<<2,k=[],y=tt=0;0<=X?tt<X:tt>X;y=0<=X?++tt:--tt)k[y]=w[y];for(u=0,H=s,s-=1;H-- >=0;)if(0!=(I=i+.5|0)){for(I>256&&(I=256),d=I+I+1,Q<<2,q=Q-1,v=m-1,Y=(_=I+1)*(_+1)/2,M=void 0,j=F=new t,y=et=1;1<=d?et<d:et>d;y=1<=d?++et:--et)j=j.next=new t,y===_&&(M=j);for(j.next=F,W=null,N=null,Z=G=0,D=n[I],P=r[I],J=it=0;0<=m?it<m:it>m;J=0<=m?++it:--it){for(B=p=a=O=g=l=0,L=_*(R=k[G]),f=_*(S=k[G+1]),h=_*(E=k[G+2]),O+=Y*R,g+=Y*S,l+=Y*E,j=F,y=nt=0;0<=_?nt<_:nt>_;y=0<=_?++nt:--nt)j.r=R,j.g=S,j.b=E,j=j.next;for(y=ot=1;1<=_?ot<_:ot>_;y=1<=_?++ot:--ot)$=G+((q<y?q:y)<<2),O+=(j.r=R=k[$])*(z=_-y),g+=(j.g=S=k[$+1])*z,l+=(j.b=E=k[$+2])*z,B+=R,p+=S,a+=E,j=j.next;for(W=F,N=M,V=rt=0;0<=Q?rt<Q:rt>Q;V=0<=Q?++rt:--rt)k[G]=O*D>>P,k[G+1]=g*D>>P,k[G+2]=l*D>>P,O-=L,g-=f,l-=h,L-=W.r,f-=W.g,h-=W.b,$=Z+(($=V+_)<q?$:q)<<2,O+=B+=W.r=k[$],g+=p+=W.g=k[$+1],l+=a+=W.b=k[$+2],W=W.next,L+=R=N.r,f+=S=N.g,h+=E=N.b,B-=R,p-=S,a-=E,N=N.next,G+=4;Z+=Q}for(V=st=0;0<=Q?st<Q:st>Q;V=0<=Q?++st:--st){for(p=a=B=g=l=O=0,L=_*(R=k[G=V<<2]),f=_*(S=k[G+1]),h=_*(E=k[G+2]),O+=Y*R,g+=Y*S,l+=Y*E,j=F,y=at=0;0<=_?at<_:at>_;y=0<=_?++at:--at)j.r=R,j.g=S,j.b=E,j=j.next;for(K=Q,y=ht=1;1<=_?ht<_:ht>_;y=1<=_?++ht:--ht)G=K+V<<2,O+=(j.r=R=k[G])*(z=_-y),g+=(j.g=S=k[G+1])*z,l+=(j.b=E=k[G+2])*z,B+=R,p+=S,a+=E,j=j.next,y<v&&(K+=Q);for(G=V,W=F,N=M,J=lt=0;0<=m?lt<m:lt>m;J=0<=m?++lt:--lt)k[$=G<<2]=O*D>>P,k[$+1]=g*D>>P,k[$+2]=l*D>>P,O-=L,g-=f,l-=h,L-=W.r,f-=W.g,h-=W.b,$=V+(($=J+_)<v?$:v)*Q<<2,O+=B+=W.r=k[$],g+=p+=W.g=k[$+1],l+=a+=W.b=k[$+2],W=W.next,L+=R=N.r,f+=S=N.g,h+=E=N.b,B-=R,p-=S,a-=E,N=N.next,G+=Q}for(i*=o,y=U;--y>-1;)(C=0|(T=(255&A[(x=y<<2)+2])/255*s))===u?(b=256-(c=256*(T-(0|T))),w[x]=w[x]*b+k[x]*c>>8,w[x+1]=w[x+1]*b+k[x+1]*c>>8,w[x+2]=w[x+2]*b+k[x+2]*c>>8):C===u+1&&(w[x]=k[x],w[x+1]=k[x+1],w[x+2]=k[x+2]);u++}return this}),o.Filter.register("tiltShift",function(t){var i,n;return i={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},t=w.extend(i,t),t.angle*=Math.PI/180,n=e(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,t.angle,t.focusWidth,!0),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])}),o.Filter.register("radialBlur",function(t){var e,n,o,r;return e={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},(t=w.extend(e,t)).radius||(t.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),o=t.radius/2-t.size,r=t.radius/2,n=i(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,o,r),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])})}(),o.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),o.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),o.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),o.Filter.register("posterize",function(t){var e,i;return e=256/t,i=255/(t-1),this.process("posterize",function(t){return t.r=Math.floor(Math.floor(t.r/e)*i),t.g=Math.floor(Math.floor(t.g/e)*i),t.b=Math.floor(Math.floor(t.b/e)*i),t})}),o.Filter.register("vintage",function(t){if(null==t&&(t=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87),t)return this.vignette("40%",30)}),o.Filter.register("lomo",function(t){return null==t&&(t=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),t&&this.vignette("50%",60),this.brightness(5)}),o.Filter.register("clarity",function(t){return null==t&&(t=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),t&&(this.greyscale(),this.contrast(4)),this}),o.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),o.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),o.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),o.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),o.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),o.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),o.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),o.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),o.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),o.Filter.register("glowingSun",function(t){if(null==t&&(t=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8),t)return this.vignette("45%",20)}),o.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),o.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),o.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),o.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),o.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),function(){var t,e,i;e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},o.Plugin.register("stackBlur",function(n){var o,r,s,a,h,l,c,u,d,p,f,g,m,v,y,b,x,w,C,I,T,D,$,E,S,k,R,B,L,O,A,_,z,P,j,M,W,N,F,H,Y,U,X,Q;if(!(isNaN(n)||n<1)){for(n|=0,y=this.pixelData,a=n+n+1,(L=this.dimensions.width)<<2,O=L-1,d=(u=this.dimensions.height)-1,B=(I=n+1)*(I+1)/2,$=R=new t,p=M=1;1<=a?M<a:M>a;p=1<=a?++M:--M)$=$.next=new t,p===I&&(E=$);for($.next=R,S=null,k=null,j=z=0,f=e[n],D=i[n],_=W=0;0<=u?W<u:W>u;_=0<=u?++W:--W){for(x=h=o=C=c=s=0,w=I*(b=y[z]),l=I*(v=y[z+1]),r=I*(m=y[z+2]),C+=B*b,c+=B*v,s+=B*m,$=R,p=N=0;0<=I?N<I:N>I;p=0<=I?++N:--N)$.r=b,$.g=v,$.b=m,$=$.next;for(p=F=1;1<=I?F<I:F>I;p=1<=I?++F:--F)g=z+((O<p?O:p)<<2),C+=($.r=b=y[g])*(T=I-p),c+=($.g=v=y[g+1])*T,s+=($.b=m=y[g+2])*T,x+=b,h+=v,o+=m,$=$.next;for(S=R,k=E,A=H=0;0<=L?H<L:H>L;A=0<=L?++H:--H)y[z]=C*f>>D,y[z+1]=c*f>>D,y[z+2]=s*f>>D,C-=w,c-=l,s-=r,w-=S.r,l-=S.g,r-=S.b,g=j+((g=A+n+1)<O?g:O)<<2,C+=x+=S.r=y[g],c+=h+=S.g=y[g+1],s+=o+=S.b=y[g+2],S=S.next,w+=b=k.r,l+=v=k.g,r+=m=k.b,x-=b,h-=v,o-=m,k=k.next,z+=4;j+=L}for(A=Y=0;0<=L?Y<L:Y>L;A=0<=L?++Y:--Y){for(h=o=x=c=s=C=0,w=I*(b=y[z=A<<2]),l=I*(v=y[z+1]),r=I*(m=y[z+2]),C+=B*b,c+=B*v,s+=B*m,$=R,p=U=0;0<=I?U<I:U>I;p=0<=I?++U:--U)$.r=b,$.g=v,$.b=m,$=$.next;for(P=L,p=X=1;1<=n?X<=n:X>=n;p=1<=n?++X:--X)z=P+A<<2,C+=($.r=b=y[z])*(T=I-p),c+=($.g=v=y[z+1])*T,s+=($.b=m=y[z+2])*T,x+=b,h+=v,o+=m,$=$.next,p<d&&(P+=L);for(z=A,S=R,k=E,_=Q=0;0<=u?Q<u:Q>u;_=0<=u?++Q:--Q)y[g=z<<2]=C*f>>D,y[g+1]=c*f>>D,y[g+2]=s*f>>D,C-=w,c-=l,s-=r,w-=S.r,l-=S.g,r-=S.b,g=A+((g=_+I)<d?g:d)*L<<2,C+=x+=S.r=y[g],c+=h+=S.g=y[g+1],s+=o+=S.b=y[g+2],S=S.next,w+=b=k.r,l+=v=k.g,r+=m=k.b,x-=b,h-=v,o-=m,k=k.next,z+=L}return this}}),o.Filter.register("stackBlur",function(t){return this.processPlugin("stackBlur",[t])})}(),o.Filter.register("threshold",function(t){return this.process("threshold",function(e){return.2126*e.r+.7152*e.g+.0722*e.b<t?(e.r=0,e.g=0,e.b=0):(e.r=255,e.g=255,e.b=255),e})})}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"number"==typeof t&&!isNaN(t)}function i(t){return void 0===t}function n(t,i){var n=[];return e(i)&&n.push(i),n.slice.apply(t,n)}function o(t,e){var i=n(arguments,2);return function(){return t.apply(e,i.concat(n(arguments)))}}function r(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return e&&(e[1]!==x.protocol||e[2]!==x.hostname||e[3]!==x.port)}function s(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function a(t){return t?' crossOrigin="'+t+'"':""}function h(t,e){var i;return t.naturalWidth&&!ht?e(t.naturalWidth,t.naturalHeight):(i=document.createElement("img"),i.onload=function(){e(this.width,this.height)},void(i.src=t.src))}function l(t){var i=[],n=t.rotate,o=t.scaleX,r=t.scaleY;return e(n)&&0!==n&&i.push("rotate("+n+"deg)"),e(o)&&1!==o&&i.push("scaleX("+o+")"),e(r)&&1!==r&&i.push("scaleY("+r+")"),i.length?i.join(" "):"none"}function c(t,e){var i,n,o=dt(t.degree)%180,r=(o>90?180-o:o)*Math.PI/180,s=pt(r),a=ft(r),h=t.width,l=t.height,c=t.aspectRatio;return e?(i=h/(a+s/c),n=i/c):(i=h*a+l*s,n=h*s+l*a),{width:i,height:n}}function u(i,n){var o,r,s,a=t("<canvas>")[0],h=a.getContext("2d"),l=0,u=0,d=n.naturalWidth,p=n.naturalHeight,f=n.rotate,g=n.scaleX,m=n.scaleY,v=e(g)&&e(m)&&(1!==g||1!==m),y=e(f)&&0!==f,b=y||v,x=d*dt(g||1),w=p*dt(m||1);return v&&(o=x/2,r=w/2),y&&(s=c({width:x,height:w,degree:f}),x=s.width,w=s.height,o=x/2,r=w/2),a.width=x,a.height=w,b&&(l=-d/2,u=-p/2,h.save(),h.translate(o,r)),y&&h.rotate(f*Math.PI/180),v&&h.scale(g,m),h.drawImage(i,vt(l),vt(u),vt(d),vt(p)),b&&h.restore(),a}function d(e){var i=e.length,n=0,o=0;return i&&(t.each(e,function(t,e){n+=e.pageX,o+=e.pageY}),n/=i,o/=i),{pageX:n,pageY:o}}function p(t,e,i){var n,o="";for(n=e,i+=e;n<i;n++)o+=yt(t.getUint8(n));return o}function f(t){var e,i,n,o,r,s,a,h,l,c,u=new T(t),d=u.byteLength;if(255===u.getUint8(0)&&216===u.getUint8(1))for(l=2;l<d;){if(255===u.getUint8(l)&&225===u.getUint8(l+1)){a=l;break}l++}if(a&&(i=a+4,n=a+10,"Exif"===p(u,i,4)&&(s=u.getUint16(n),((r=18761===s)||19789===s)&&42===u.getUint16(n+2,r)&&(o=u.getUint32(n+4,r))>=8&&(h=n+o))),h)for(d=u.getUint16(h,r),c=0;c<d;c++)if(l=h+12*c+2,274===u.getUint16(l,r)){l+=8,e=u.getUint16(l,r),ht&&u.setUint16(l,1,r);break}return e}function g(t){var e,i=t.replace(J,""),n=atob(i),o=n.length,r=new C(o),s=new I(r);for(e=0;e<o;e++)s[e]=n.charCodeAt(e);return r}function m(t){var e,i=new I(t),n=i.length,o="";for(e=0;e<n;e++)o+=yt(i[e]);return"data:image/jpeg;base64,"+D(o)}function v(e,i){this.$element=t(e),this.options=t.extend({},v.DEFAULTS,t.isPlainObject(i)&&i),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var y=t(window),b=t(document),x=window.location,w=window.navigator,C=window.ArrayBuffer,I=window.Uint8Array,T=window.DataView,D=window.btoa,$="cropper",E="cropper-modal",S="cropper-hide",k="cropper-hidden",R="cropper-move",B="cropper-crop",L="cropper-disabled",O="mousedown touchstart pointerdown MSPointerDown",A="mousemove touchmove pointermove MSPointerMove",_="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",z="wheel mousewheel DOMMouseScroll",P="dblclick",j="load."+$,M="error."+$,W="resize."+$,N="build."+$,F="built."+$,H="cropstart."+$,Y="cropmove."+$,U="cropend."+$,X="crop."+$,Q="zoom."+$,q=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,V=/^data:/,J=/^data:([^;]+);base64,/,G=/^data:image\/jpeg.*;base64,/,K="preview",Z="action",tt="se",et="sw",it="ne",nt="nw",ot="crop",rt="move",st="zoom",at=t.isFunction(t("<canvas>")[0].getContext),ht=w&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(w.userAgent),lt=Number,ct=Math.min,ut=Math.max,dt=Math.abs,pt=Math.sin,ft=Math.cos,gt=Math.sqrt,mt=Math.round,vt=Math.floor,yt=String.fromCharCode;v.prototype={constructor:v,init:function(){var t,e=this.$element;if(e.is("img")){if(this.isImg=!0,this.originalUrl=t=e.attr("src"),!t)return;t=e.prop("src")}else e.is("canvas")&&at&&(t=e[0].toDataURL());this.load(t)},trigger:function(e,i){var n=t.Event(e,i);return this.$element.trigger(n),n},load:function(e){var i,n,o=this.options,a=this.$element;if(e&&(a.one(N,o.build),!this.trigger(N).isDefaultPrevented())){if(this.url=e,this.image={},!o.checkOrientation||!C)return this.clone();if(i=t.proxy(this.read,this),V.test(e))return G.test(e)?i(g(e)):this.clone();(n=new XMLHttpRequest).onerror=n.onabort=t.proxy(function(){this.clone()},this),n.onload=function(){i(this.response)},o.checkCrossOrigin&&r(e)&&a.prop("crossOrigin")&&(e=s(e)),n.open("get",e),n.responseType="arraybuffer",n.send()}},read:function(t){var e=this.options,i=f(t),n=this.image,o=0,r=1,s=1;if(i>1)switch(this.url=m(t),i){case 2:r=-1;break;case 3:o=-180;break;case 4:s=-1;break;case 5:o=90,s=-1;break;case 6:o=90;break;case 7:o=90,r=-1;break;case 8:o=-90}e.rotatable&&(n.rotate=o),e.scalable&&(n.scaleX=r,n.scaleY=s),this.clone()},clone:function(){var e,i,n=this.options,o=this.$element,h=this.url,l="";n.checkCrossOrigin&&r(h)&&((l=o.prop("crossOrigin"))?e=h:(l="anonymous",e=s(h))),this.crossOrigin=l,this.crossOriginUrl=e,this.$clone=i=t("<img"+a(l)+' src="'+(e||h)+'">'),this.isImg?o[0].complete?this.start():o.one(j,t.proxy(this.start,this)):i.one(j,t.proxy(this.start,this)).one(M,t.proxy(this.stop,this)).addClass(S).insertAfter(o)},start:function(){var e=this.$element,i=this.$clone;this.isImg||(i.off(M,this.stop),e=i),h(e[0],t.proxy(function(e,i){t.extend(this.image,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var e,i,n,o=this.options,r=this.$element,s=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=r.parent(),this.$cropper=e=t(v.TEMPLATE),this.$canvas=e.find(".cropper-canvas").append(s),this.$dragBox=e.find(".cropper-drag-box"),this.$cropBox=i=e.find(".cropper-crop-box"),this.$viewBox=e.find(".cropper-view-box"),this.$face=n=i.find(".cropper-face"),r.addClass(k).after(e),this.isImg||s.removeClass(S),this.initPreview(),this.bind(),o.aspectRatio=ut(0,o.aspectRatio)||NaN,o.viewMode=ut(0,ct(3,mt(o.viewMode)))||0,o.autoCrop?(this.isCropped=!0,o.modal&&this.$dragBox.addClass(E)):i.addClass(k),o.guides||i.find(".cropper-dashed").addClass(k),o.center||i.find(".cropper-center").addClass(k),o.cropBoxMovable&&n.addClass(R).data(Z,"all"),o.highlight||n.addClass("cropper-invisible"),o.background&&e.addClass("cropper-bg"),o.cropBoxResizable||i.find(".cropper-line, .cropper-point").addClass(k),this.setDragMode(o.dragMode),this.render(),this.isBuilt=!0,this.setData(o.data),r.one(F,o.built),this.completing=setTimeout(t.proxy(function(){this.trigger(F),this.trigger(X,this.getData()),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isCompleted||clearTimeout(this.completing),this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,e=this.$element,i=this.$container,n=this.$cropper;n.addClass(k),e.removeClass(k),n.css(this.container={width:ut(i.width(),lt(t.minContainerWidth)||200),height:ut(i.height(),lt(t.minContainerHeight)||100)}),e.addClass(k),n.removeClass(k)},initCanvas:function(){var e,i=this.options.viewMode,n=this.container,o=n.width,r=n.height,s=this.image,a=s.naturalWidth,h=s.naturalHeight,l=90===dt(s.rotate),c=l?h:a,u=l?a:h,d=c/u,p=o,f=r;r*d>o?3===i?p=r*d:f=o/d:3===i?f=o/d:p=r*d,(e={naturalWidth:c,naturalHeight:u,aspectRatio:d,width:p,height:f}).oldLeft=e.left=(o-p)/2,e.oldTop=e.top=(r-f)/2,this.canvas=e,this.isLimited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImage=t.extend({},s),this.initialCanvas=t.extend({},e)},limitCanvas:function(t,e){var i,n,o,r,s=this.options,a=s.viewMode,h=this.container,l=h.width,c=h.height,u=this.canvas,d=u.aspectRatio,p=this.cropBox,f=this.isCropped&&p;t&&(i=lt(s.minCanvasWidth)||0,n=lt(s.minCanvasHeight)||0,a&&(a>1?(i=ut(i,l),n=ut(n,c),3===a&&(n*d>i?i=n*d:n=i/d)):i?i=ut(i,f?p.width:0):n?n=ut(n,f?p.height:0):f&&(i=p.width,(n=p.height)*d>i?i=n*d:n=i/d)),i&&n?n*d>i?n=i/d:i=n*d:i?n=i/d:n&&(i=n*d),u.minWidth=i,u.minHeight=n,u.maxWidth=1/0,u.maxHeight=1/0),e&&(a?(o=l-u.width,r=c-u.height,u.minLeft=ct(0,o),u.minTop=ct(0,r),u.maxLeft=ut(0,o),u.maxTop=ut(0,r),f&&this.isLimited&&(u.minLeft=ct(p.left,p.left+p.width-u.width),u.minTop=ct(p.top,p.top+p.height-u.height),u.maxLeft=p.left,u.maxTop=p.top,2===a&&(u.width>=l&&(u.minLeft=ct(0,o),u.maxLeft=ut(0,o)),u.height>=c&&(u.minTop=ct(0,r),u.maxTop=ut(0,r))))):(u.minLeft=-u.width,u.minTop=-u.height,u.maxLeft=l,u.maxTop=c))},renderCanvas:function(t){var e,i,n=this.canvas,o=this.image,r=o.rotate,s=o.naturalWidth,a=o.naturalHeight;this.isRotated&&(this.isRotated=!1,i=c({width:o.width,height:o.height,degree:r}),(e=i.width/i.height)!==n.aspectRatio&&(n.left-=(i.width-n.width)/2,n.top-=(i.height-n.height)/2,n.width=i.width,n.height=i.height,n.aspectRatio=e,n.naturalWidth=s,n.naturalHeight=a,r%180&&(i=c({width:s,height:a,degree:r}),n.naturalWidth=i.width,n.naturalHeight=i.height),this.limitCanvas(!0,!1))),(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=ct(ut(n.width,n.minWidth),n.maxWidth),n.height=ct(ut(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.oldLeft=n.left=ct(ut(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=ct(ut(n.top,n.minTop),n.maxTop),this.$canvas.css({width:n.width,height:n.height,left:n.left,top:n.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),t&&this.output()},renderImage:function(e){var i,n=this.canvas,o=this.image;o.rotate&&(i=c({width:n.width,height:n.height,degree:o.rotate,aspectRatio:o.aspectRatio},!0)),t.extend(o,i?{width:i.width,height:i.height,left:(n.width-i.width)/2,top:(n.height-i.height)/2}:{width:n.width,height:n.height,left:0,top:0}),this.$clone.css({width:o.width,height:o.height,marginLeft:o.left,marginTop:o.top,transform:l(o)}),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvas,n=e.aspectRatio,o=lt(e.autoCropArea)||.8,r={width:i.width,height:i.height};n&&(i.height*n>i.width?r.height=r.width/n:r.width=r.height*n),this.cropBox=r,this.limitCropBox(!0,!0),r.width=ct(ut(r.width,r.minWidth),r.maxWidth),r.height=ct(ut(r.height,r.minHeight),r.maxHeight),r.width=ut(r.minWidth,r.width*o),r.height=ut(r.minHeight,r.height*o),r.oldLeft=r.left=i.left+(i.width-r.width)/2,r.oldTop=r.top=i.top+(i.height-r.height)/2,this.initialCropBox=t.extend({},r)},limitCropBox:function(t,e){var i,n,o,r,s=this.options,a=s.aspectRatio,h=this.container,l=h.width,c=h.height,u=this.canvas,d=this.cropBox,p=this.isLimited;t&&(i=lt(s.minCropBoxWidth)||0,n=lt(s.minCropBoxHeight)||0,i=ct(i,l),n=ct(n,c),o=ct(l,p?u.width:l),r=ct(c,p?u.height:c),a&&(i&&n?n*a>i?n=i/a:i=n*a:i?n=i/a:n&&(i=n*a),r*a>o?r=o/a:o=r*a),d.minWidth=ct(i,o),d.minHeight=ct(n,r),d.maxWidth=o,d.maxHeight=r),e&&(p?(d.minLeft=ut(0,u.left),d.minTop=ut(0,u.top),d.maxLeft=ct(l,u.left+u.width)-d.width,d.maxTop=ct(c,u.top+u.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=l-d.width,d.maxTop=c-d.height))},renderCropBox:function(){var t=this.options,e=this.container,i=e.width,n=e.height,o=this.cropBox;(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=ct(ut(o.width,o.minWidth),o.maxWidth),o.height=ct(ut(o.height,o.minHeight),o.maxHeight),this.limitCropBox(!1,!0),o.oldLeft=o.left=ct(ut(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=ct(ut(o.top,o.minTop),o.maxTop),t.movable&&t.cropBoxMovable&&this.$face.data(Z,o.width===i&&o.height===n?rt:"all"),this.$cropBox.css({width:o.width,height:o.height,left:o.left,top:o.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted&&this.trigger(X,this.getData())},initPreview:function(){var e,i=a(this.crossOrigin),n=i?this.crossOriginUrl:this.url;this.$preview=t(this.options.preview),this.$clone2=e=t("<img"+i+' src="'+n+'">'),this.$viewBox.html(e),this.$preview.each(function(){var e=t(this);e.data(K,{width:e.width(),height:e.height(),html:e.html()}),e.html("<img"+i+' src="'+n+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var e=t(this),i=e.data(K);e.css({width:i.width,height:i.height}).html(i.html).removeData(K)})},preview:function(){var e=this.image,i=this.canvas,n=this.cropBox,o=n.width,r=n.height,s=e.width,a=e.height,h=n.left-i.left-e.left,c=n.top-i.top-e.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:s,height:a,marginLeft:-h,marginTop:-c,transform:l(e)}),this.$preview.each(function(){var i=t(this),n=i.data(K),u=n.width,d=n.height,p=u,f=d,g=1;o&&(g=u/o,f=r*g),r&&f>d&&(g=d/r,p=o*g,f=d),i.css({width:p,height:f}).find("img").css({width:s*g,height:a*g,marginLeft:-h*g,marginTop:-c*g,transform:l(e)})}))},bind:function(){var e=this.options,i=this.$element,n=this.$cropper;t.isFunction(e.cropstart)&&i.on(H,e.cropstart),t.isFunction(e.cropmove)&&i.on(Y,e.cropmove),t.isFunction(e.cropend)&&i.on(U,e.cropend),t.isFunction(e.crop)&&i.on(X,e.crop),t.isFunction(e.zoom)&&i.on(Q,e.zoom),n.on(O,t.proxy(this.cropStart,this)),e.zoomable&&e.zoomOnWheel&&n.on(z,t.proxy(this.wheel,this)),e.toggleDragModeOnDblclick&&n.on(P,t.proxy(this.dblclick,this)),b.on(A,this._cropMove=o(this.cropMove,this)).on(_,this._cropEnd=o(this.cropEnd,this)),e.responsive&&y.on(W,this._resize=o(this.resize,this))},unbind:function(){var e=this.options,i=this.$element,n=this.$cropper;t.isFunction(e.cropstart)&&i.off(H,e.cropstart),t.isFunction(e.cropmove)&&i.off(Y,e.cropmove),t.isFunction(e.cropend)&&i.off(U,e.cropend),t.isFunction(e.crop)&&i.off(X,e.crop),t.isFunction(e.zoom)&&i.off(Q,e.zoom),n.off(O,this.cropStart),e.zoomable&&e.zoomOnWheel&&n.off(z,this.wheel),e.toggleDragModeOnDblclick&&n.off(P,this.dblclick),b.off(A,this._cropMove).off(_,this._cropEnd),e.responsive&&y.off(W,this._resize)},resize:function(){var e,i,n,o=this.options.restore,r=this.$container,s=this.container;!this.isDisabled&&s&&(1==(n=r.width()/s.width)&&r.height()===s.height||(o&&(e=this.getCanvasData(),i=this.getCropBoxData()),this.render(),o&&(this.setCanvasData(t.each(e,function(t,i){e[t]=i*n})),this.setCropBoxData(t.each(i,function(t,e){i[t]=e*n})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(B)?this.setDragMode(rt):this.setDragMode(ot))},wheel:function(e){var i=e.originalEvent||e,n=lt(this.options.wheelZoomRatio)||.1,o=1;this.isDisabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(t.proxy(function(){this.wheeling=!1},this),50),i.deltaY?o=i.deltaY>0?1:-1:i.wheelDelta?o=-i.wheelDelta/120:i.detail&&(o=i.detail>0?1:-1),this.zoom(-o*n,e)))},cropStart:function(e){var i,n,o=this.options,r=e.originalEvent,s=r&&r.touches,a=e;if(!this.isDisabled){if(s){if((i=s.length)>1){if(!o.zoomable||!o.zoomOnTouch||2!==i)return;a=s[1],this.startX2=a.pageX,this.startY2=a.pageY,n=st}a=s[0]}if(n=n||t(a.target).data(Z),q.test(n)){if(this.trigger(H,{originalEvent:r,action:n}).isDefaultPrevented())return;e.preventDefault(),this.action=n,this.cropping=!1,this.startX=a.pageX||r&&r.pageX,this.startY=a.pageY||r&&r.pageY,n===ot&&(this.cropping=!0,this.$dragBox.addClass(E))}}},cropMove:function(t){var e,i=this.options,n=t.originalEvent,o=n&&n.touches,r=t,s=this.action;if(!this.isDisabled){if(o){if((e=o.length)>1){if(!i.zoomable||!i.zoomOnTouch||2!==e)return;r=o[1],this.endX2=r.pageX,this.endY2=r.pageY}r=o[0]}if(s){if(this.trigger(Y,{originalEvent:n,action:s}).isDefaultPrevented())return;t.preventDefault(),this.endX=r.pageX||n&&n.pageX,this.endY=r.pageY||n&&n.pageY,this.change(r.shiftKey,s===st?t:null)}}},cropEnd:function(t){var e=t.originalEvent,i=this.action;this.isDisabled||i&&(t.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(E,this.isCropped&&this.options.modal)),this.action="",this.trigger(U,{originalEvent:e,action:i}))},change:function(t,e){var i,n,o=this.options.aspectRatio,r=this.action,s=this.container,a=this.canvas,h=this.cropBox,l=h.width,c=h.height,u=h.left,d=h.top,p=u+l,f=d+c,g=0,m=0,v=s.width,y=s.height,b=!0;switch(!o&&t&&(o=l&&c?l/c:1),this.isLimited&&(g=h.minLeft,m=h.minTop,v=g+ct(s.width,a.width,a.left+a.width),y=m+ct(s.height,a.height,a.top+a.height)),n={x:this.endX-this.startX,y:this.endY-this.startY},o&&(n.X=n.y*o,n.Y=n.x/o),r){case"all":u+=n.x,d+=n.y;break;case"e":if(n.x>=0&&(p>=v||o&&(d<=m||f>=y))){b=!1;break}l+=n.x,o&&(c=l/o,d-=n.Y/2),l<0&&(r="w",l=0);break;case"n":if(n.y<=0&&(d<=m||o&&(u<=g||p>=v))){b=!1;break}c-=n.y,d+=n.y,o&&(l=c*o,u+=n.X/2),c<0&&(r="s",c=0);break;case"w":if(n.x<=0&&(u<=g||o&&(d<=m||f>=y))){b=!1;break}l-=n.x,u+=n.x,o&&(c=l/o,d+=n.Y/2),l<0&&(r="e",l=0);break;case"s":if(n.y>=0&&(f>=y||o&&(u<=g||p>=v))){b=!1;break}c+=n.y,o&&(l=c*o,u-=n.X/2),c<0&&(r="n",c=0);break;case it:if(o){if(n.y<=0&&(d<=m||p>=v)){b=!1;break}c-=n.y,d+=n.y,l=c*o}else n.x>=0?p<v?l+=n.x:n.y<=0&&d<=m&&(b=!1):l+=n.x,n.y<=0?d>m&&(c-=n.y,d+=n.y):(c-=n.y,d+=n.y);l<0&&c<0?(r=et,c=0,l=0):l<0?(r=nt,l=0):c<0&&(r=tt,c=0);break;case nt:if(o){if(n.y<=0&&(d<=m||u<=g)){b=!1;break}c-=n.y,d+=n.y,l=c*o,u+=n.X}else n.x<=0?u>g?(l-=n.x,u+=n.x):n.y<=0&&d<=m&&(b=!1):(l-=n.x,u+=n.x),n.y<=0?d>m&&(c-=n.y,d+=n.y):(c-=n.y,d+=n.y);l<0&&c<0?(r=tt,c=0,l=0):l<0?(r=it,l=0):c<0&&(r=et,c=0);break;case et:if(o){if(n.x<=0&&(u<=g||f>=y)){b=!1;break}l-=n.x,u+=n.x,c=l/o}else n.x<=0?u>g?(l-=n.x,u+=n.x):n.y>=0&&f>=y&&(b=!1):(l-=n.x,u+=n.x),n.y>=0?f<y&&(c+=n.y):c+=n.y;l<0&&c<0?(r=it,c=0,l=0):l<0?(r=tt,l=0):c<0&&(r=nt,c=0);break;case tt:if(o){if(n.x>=0&&(p>=v||f>=y)){b=!1;break}c=(l+=n.x)/o}else n.x>=0?p<v?l+=n.x:n.y>=0&&f>=y&&(b=!1):l+=n.x,n.y>=0?f<y&&(c+=n.y):c+=n.y;l<0&&c<0?(r=nt,c=0,l=0):l<0?(r=et,l=0):c<0&&(r=it,c=0);break;case rt:this.move(n.x,n.y),b=!1;break;case st:this.zoom(function(t,e,i,n){var o=gt(t*t+e*e);return(gt(i*i+n*n)-o)/o}(dt(this.startX-this.startX2),dt(this.startY-this.startY2),dt(this.endX-this.endX2),dt(this.endY-this.endY2)),e),this.startX2=this.endX2,this.startY2=this.endY2,b=!1;break;case ot:if(!n.x||!n.y){b=!1;break}i=this.$cropper.offset(),u=this.startX-i.left,d=this.startY-i.top,l=h.minWidth,c=h.minHeight,n.x>0?r=n.y>0?tt:it:n.x<0&&(u-=l,r=n.y>0?et:nt),n.y<0&&(d-=c),this.isCropped||(this.$cropBox.removeClass(k),this.isCropped=!0,this.isLimited&&this.limitCropBox(!0,!0))}b&&(h.width=l,h.height=c,h.left=u,h.top=d,this.action=r,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(E),this.$cropBox.removeClass(k)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.cropBox=t.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(E),this.$cropBox.addClass(k))},replace:function(t,e){!this.isDisabled&&t&&(this.isImg&&this.$element.attr("src",t),e?(this.url=t,this.$clone.attr("src",t),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",t)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(t)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(L))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(L))},destroy:function(){var t=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&t.attr("src",this.originalUrl),this.unbuild(),t.removeClass(k)):this.isImg?t.off(j,this.start):this.$clone&&this.$clone.remove(),t.removeData($)},move:function(t,e){var n=this.canvas;this.moveTo(i(t)?t:n.left+lt(t),i(e)?e:n.top+lt(e))},moveTo:function(t,n){var o=this.canvas,r=!1;i(n)&&(n=t),t=lt(t),n=lt(n),this.isBuilt&&!this.isDisabled&&this.options.movable&&(e(t)&&(o.left=t,r=!0),e(n)&&(o.top=n,r=!0),r&&this.renderCanvas(!0))},zoom:function(t,e){var i=this.canvas;t=(t=lt(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,e)},zoomTo:function(t,e){var i,n,o,r,s,a=this.options,h=this.canvas,l=h.width,c=h.height,u=h.naturalWidth,p=h.naturalHeight;if((t=lt(t))>=0&&this.isBuilt&&!this.isDisabled&&a.zoomable){if(n=u*t,o=p*t,e&&(i=e.originalEvent),this.trigger(Q,{originalEvent:i,oldRatio:l/u,ratio:n/u}).isDefaultPrevented())return;i?(r=this.$cropper.offset(),s=i.touches?d(i.touches):{pageX:e.pageX||i.pageX||0,pageY:e.pageY||i.pageY||0},h.left-=(n-l)*((s.pageX-r.left-h.left)/l),h.top-=(o-c)*((s.pageY-r.top-h.top)/c)):(h.left-=(n-l)/2,h.top-=(o-c)/2),h.width=n,h.height=o,this.renderCanvas(!0)}},rotate:function(t){this.rotateTo((this.image.rotate||0)+lt(t))},rotateTo:function(t){e(t=lt(t))&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=t%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(t,n){var o=this.image,r=!1;i(n)&&(n=t),t=lt(t),n=lt(n),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(e(t)&&(o.scaleX=t,r=!0),e(n)&&(o.scaleY=n,r=!0),r&&this.renderImage(!0))},scaleX:function(t){var i=this.image.scaleY;this.scale(t,e(i)?i:1)},scaleY:function(t){var i=this.image.scaleX;this.scale(e(i)?i:1,t)},getData:function(e){var i,n,o=this.options,r=this.image,s=this.canvas,a=this.cropBox;return this.isBuilt&&this.isCropped?(n={x:a.left-s.left,y:a.top-s.top,width:a.width,height:a.height},i=r.width/r.naturalWidth,t.each(n,function(t,o){o/=i,n[t]=e?mt(o):o})):n={x:0,y:0,width:0,height:0},o.rotatable&&(n.rotate=r.rotate||0),o.scalable&&(n.scaleX=r.scaleX||1,n.scaleY=r.scaleY||1),n},setData:function(i){var n,o,r,s=this.options,a=this.image,h=this.canvas,l={};t.isFunction(i)&&(i=i.call(this.element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(s.rotatable&&e(i.rotate)&&i.rotate!==a.rotate&&(a.rotate=i.rotate,this.isRotated=n=!0),s.scalable&&(e(i.scaleX)&&i.scaleX!==a.scaleX&&(a.scaleX=i.scaleX,o=!0),e(i.scaleY)&&i.scaleY!==a.scaleY&&(a.scaleY=i.scaleY,o=!0)),n?this.renderCanvas():o&&this.renderImage(),r=a.width/a.naturalWidth,e(i.x)&&(l.left=i.x*r+h.left),e(i.y)&&(l.top=i.y*r+h.top),e(i.width)&&(l.width=i.width*r),e(i.height)&&(l.height=i.height*r),this.setCropBoxData(l))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var e=this.canvas,i={};return this.isBuilt&&t.each(["left","top","width","height","naturalWidth","naturalHeight"],function(t,n){i[n]=e[n]}),i},setCanvasData:function(i){var n=this.canvas,o=n.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&!this.isDisabled&&t.isPlainObject(i)&&(e(i.left)&&(n.left=i.left),e(i.top)&&(n.top=i.top),e(i.width)?(n.width=i.width,n.height=i.width/o):e(i.height)&&(n.height=i.height,n.width=i.height*o),this.renderCanvas(!0))},getCropBoxData:function(){var t,e=this.cropBox;return this.isBuilt&&this.isCropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(i){var n,o,r=this.cropBox,s=this.options.aspectRatio;t.isFunction(i)&&(i=i.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&t.isPlainObject(i)&&(e(i.left)&&(r.left=i.left),e(i.top)&&(r.top=i.top),e(i.width)&&(n=!0,r.width=i.width),e(i.height)&&(o=!0,r.height=i.height),s&&(n?r.height=r.width/s:o&&(r.width=r.height*s)),this.renderCropBox())},getCroppedCanvas:function(e){var i,n,o,r,s,a,h,l,c,d,p;if(this.isBuilt&&at)return this.isCropped?(t.isPlainObject(e)||(e={}),p=this.getData(),i=p.width,n=p.height,l=i/n,t.isPlainObject(e)&&(s=e.width,a=e.height,s?(a=s/l,h=s/i):a&&(s=a*l,h=a/n)),o=vt(s||i),r=vt(a||n),c=t("<canvas>")[0],c.width=o,c.height=r,d=c.getContext("2d"),e.fillColor&&(d.fillStyle=e.fillColor,d.fillRect(0,0,o,r)),d.drawImage.apply(d,function(){var t,e,o,r,s,a,l=u(this.$clone[0],this.image),c=l.width,d=l.height,f=this.canvas,g=[l],m=p.x+f.naturalWidth*(dt(p.scaleX||1)-1)/2,v=p.y+f.naturalHeight*(dt(p.scaleY||1)-1)/2;return m<=-i||m>c?m=t=o=s=0:m<=0?(o=-m,m=0,t=s=ct(c,i+m)):m<=c&&(o=0,t=s=ct(i,c-m)),t<=0||v<=-n||v>d?v=e=r=a=0:v<=0?(r=-v,v=0,e=a=ct(d,n+v)):v<=d&&(r=0,e=a=ct(n,d-v)),g.push(vt(m),vt(v),vt(t),vt(e)),h&&(o*=h,r*=h,s*=h,a*=h),s>0&&a>0&&g.push(vt(o),vt(r),vt(s),vt(a)),g}.call(this)),c):u(this.$clone[0],this.image)},setAspectRatio:function(t){var e=this.options;this.isDisabled||i(t)||(e.aspectRatio=ut(0,t)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(t){var e,i,n=this.options;this.isLoaded&&!this.isDisabled&&(e=t===ot,i=n.movable&&t===rt,t=e||i?t:"none",this.$dragBox.data(Z,t).toggleClass(B,e).toggleClass(R,i),n.cropBoxMovable||this.$face.data(Z,t).toggleClass(B,e).toggleClass(R,i))}},v.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},v.setDefaults=function(e){t.extend(v.DEFAULTS,e)},v.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',v.other=t.fn.cropper,t.fn.cropper=function(e){var o,r=n(arguments,1);return this.each(function(){var i,n,s=t(this),a=s.data($);if(!a){if(/destroy/.test(e))return;i=t.extend({},s.data(),t.isPlainObject(e)&&e),s.data($,a=new v(this,i))}"string"==typeof e&&t.isFunction(n=a[e])&&(o=n.apply(a,r))}),i(o)?this:o},t.fn.cropper.Constructor=v,t.fn.cropper.setDefaults=v.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=v.other,this}}),window.fbAsyncInit=function(){FB.init({appId:"836518019843190",autoLogAppEvents:!0,xfbml:!0,version:"v2.10"}),FB.AppEvents.logPageView()},function(t,e,i){var n,o=t.getElementsByTagName(e)[0];t.getElementById(i)||((n=t.createElement(e)).id=i,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk"),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),o=i[n+=s?0:1]}return this}},e.allOff=e.removeAllListeners=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var a=t.jQuery,h=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&l[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var l={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&h&&h.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&(a=e,a.fn.imagesLoaded=function(t,e){return new o(this,t,e).jqDeferred.promise(a(this))})},o.makeJQueryPlugin(),o}),function(t,e){"use strict";function i(i){var n=e.console;o[i]||(o[i]=!0,t.migrateWarnings.push(i),n&&n.warn&&!t.migrateMute&&(n.warn("JQMIGRATE: "+i),t.migrateTrace&&n.trace&&n.trace()))}function n(t,e,n,o){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i(o),n}})}t.migrateVersion="3.0.0",function(){var i=e.console&&e.console.log&&function(){e.console.log.apply(e.console,arguments)},n=/^[12]\./;i&&(t&&!n.test(t.fn.jquery)||i("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),t.migrateWarnings&&i("JQMIGRATE: Migrate plugin loaded multiple times"),i("JQMIGRATE: Migrate is installed"+(t.migrateMute?"":" with logging active")+", version "+t.migrateVersion))}();var o={};t.migrateWarnings=[],void 0===t.migrateTrace&&(t.migrateTrace=!0),t.migrateReset=function(){o={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&i("jQuery is not compatible with Quirks Mode");var r=t.fn.init,s=t.isNumeric,a=t.find,h=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,l=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;t.fn.init=function(t){var e=Array.prototype.slice.call(arguments);return"string"==typeof t&&"#"===t&&(i("jQuery( '#' ) is not a valid selector"),e[0]=[]),r.apply(this,e)},t.fn.init.prototype=t.fn,t.find=function(t){var e=Array.prototype.slice.call(arguments);if("string"==typeof t&&h.test(t))try{document.querySelector(t)}catch(n){t=t.replace(l,function(t,e,i,n){return"["+e+i+'"'+n+'"]'});try{document.querySelector(t),i("Attribute selector with '#' must be quoted: "+e[0]),e[0]=t}catch(t){i("Attribute selector with '#' was not fixed: "+e[0])}}return a.apply(this,e)};var c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t.find[c]=a[c]);t.fn.size=function(){return i("jQuery.fn.size() is deprecated; use the .length property"),this.length},t.parseJSON=function(){return i("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},t.isNumeric=function(e){var n=s(e),o=function(e){var i=e&&e.toString();return!t.isArray(e)&&i-parseFloat(i)+1>=0}(e);return n!==o&&i("jQuery.isNumeric() should not be called on constructed objects"),o},n(t,"unique",t.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort"),n(t.expr,"filters",t.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos"),n(t.expr,":",t.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var u=t.ajax;t.ajax=function(){var t=u.apply(this,arguments);return t.promise&&(n(t,"success",t.done,"jQXHR.success is deprecated and removed"),n(t,"error",t.fail,"jQXHR.error is deprecated and removed"),n(t,"complete",t.always,"jQXHR.complete is deprecated and removed")),t};var d=t.fn.removeAttr,p=t.fn.toggleClass,f=/\S+/g;t.fn.removeAttr=function(e){var n=this;return t.each(e.match(f),function(e,o){t.expr.match.bool.test(o)&&(i("jQuery.fn.removeAttr no longer sets boolean properties: "+o),n.prop(o,!1))}),d.apply(this,arguments)},t.fn.toggleClass=function(e){return void 0!==e&&"boolean"!=typeof e?p.apply(this,arguments):(i("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&t.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":t.data(this,"__className__")||"")}))};var g=!1;t.swap&&t.each(["height","width","reliableMarginRight"],function(e,i){var n=t.cssHooks[i]&&t.cssHooks[i].get;n&&(t.cssHooks[i].get=function(){var t;return g=!0,t=n.apply(this,arguments),g=!1,t})}),t.swap=function(t,e,n,o){var r,s,a={};g||i("jQuery.swap() is undocumented and deprecated");for(s in e)a[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,o||[]);for(s in e)t.style[s]=a[s];return r};var m=t.data;t.data=function(e,n,o){var r;return n&&n!==t.camelCase(n)&&(r=t.hasData(e)&&m.call(this,e))&&n in r?(i("jQuery.data() always sets/gets camelCased names: "+n),arguments.length>2&&(r[n]=o),r[n]):m.apply(this,arguments)};var v=t.Tween.prototype.run;t.Tween.prototype.run=function(e){t.easing[this.easing].length>1&&(i('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),t.easing[this.easing]=t.easing[this.easing].bind(t.easing,e,this.options.duration*e,0,1,this.options.duration)),v.apply(this,arguments)};var y=t.fn.load,b=t.event.fix;t.event.props=[],t.event.fixHooks={},t.event.fix=function(e){var n,o=e.type,r=this.fixHooks[o],s=t.event.props;if(s.length)for(i("jQuery.event.props are deprecated and removed: "+s.join());s.length;)t.event.addProp(s.pop());if(r&&!r._migrated_&&(r._migrated_=!0,i("jQuery.event.fixHooks are deprecated and removed: "+o),(s=r.props)&&s.length))for(;s.length;)t.event.addProp(s.pop());return n=b.call(this,e),r&&r.filter?r.filter(n,e):n},t.each(["load","unload","error"],function(e,n){t.fn[n]=function(){var t=Array.prototype.slice.call(arguments,0);return"load"===n&&"string"==typeof t[0]?y.apply(this,t):(i("jQuery.fn."+n+"() is deprecated"),t.splice(0,0,n),arguments.length?this.on.apply(this,t):(this.triggerHandler.apply(this,t),this))}}),t(function(){t(document).triggerHandler("ready")}),t.event.special.ready={setup:function(){this===document&&i("'ready' event is deprecated")}},t.fn.extend({bind:function(t,e,n){return i("jQuery.fn.bind() is deprecated"),this.on(t,null,e,n)},unbind:function(t,e){return i("jQuery.fn.unbind() is deprecated"),this.off(t,null,e)},delegate:function(t,e,n,o){return i("jQuery.fn.delegate() is deprecated"),this.on(e,t,n,o)},undelegate:function(t,e,n){return i("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var x=t.fn.offset;t.fn.offset=function(){var e,n=this[0],o={top:0,left:0};return n&&n.nodeType?(e=(n.ownerDocument||document).documentElement,t.contains(e,n)?x.apply(this,arguments):(i("jQuery.fn.offset() requires an element connected to a document"),o)):(i("jQuery.fn.offset() requires a valid DOM element"),o)};var w=t.param;t.param=function(e,n){var o=t.ajaxSettings&&t.ajaxSettings.traditional;return void 0===n&&o&&(i("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),n=o),w.call(this,e,n)};var C=t.fn.andSelf||t.fn.addBack;t.fn.andSelf=function(){return i("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),C.apply(this,arguments)};var I=t.Deferred,T=[["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),"rejected"],["notify","progress",t.Callbacks("memory"),t.Callbacks("memory")]];t.Deferred=function(e){var n=I(),o=n.promise();return n.pipe=o.pipe=function(){var e=arguments;return i("deferred.pipe() is deprecated"),t.Deferred(function(i){t.each(T,function(r,s){var a=t.isFunction(e[r])&&e[r];n[s[1]](function(){var e=a&&a.apply(this,arguments);e&&t.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===o?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},e&&e.call(n,n),n}}(jQuery,window),function(t){t.fn.extend({slimScroll:function(e){var i={axis:"y",width:"auto",height:"250px",size:"7px",color:"#000",positionX:"bottom",positionY:"right",distance:"1px",startX:"left",startY:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClassX:"slimScrollRailX",barClassX:"slimScrollBarX",railClassY:"slimScrollRailY",barClassY:"slimScrollBarY",wrapperClass:"slimScrollDiv",allowPageScroll:!1,applyVerticalWheelToHorizontal:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},n=t.extend(i,e);return n.axis=n.axis.toLowerCase(),this.each(function(){function i(t){var e=0,i=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-1*t.wheelDelta/6),"wheelDeltaY"in t&&(i=-1*t.wheelDeltaY/6),"wheelDeltaX"in t&&(e=t.wheelDeltaX/6),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=-1*i,i=0),e!==e&&i!==i&&(e=0,i=t.wheelDelta),"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(e=t.deltaX),[e,i]}function o(e){if(v){var o=i(e=e||window.event),s=o[0],a=o[1],h=e.target||e.srcTarget||e.srcElement;t(h).closest("."+n.wrapperClass).is(_.parent())&&r(s,a,!0),e.preventDefault&&!A&&(e.preventDefault(),e.stopPropagation()),A||(e.returnValue=!1)}}function r(t,e,i,o){if(A=!1,d){var r=moveFactor=t;n.applyVerticalWheelToHorizontal&&"x"==n.axis&&!r&&e&&(r=moveFactor=e);var s=_.outerWidth()-N.outerWidth();if(i&&(r=parseInt(N.css("left"))+moveFactor*parseInt(n.wheelStep)/100,r=Math.min(Math.max(r,0),s),r=moveFactor>0?Math.ceil(r):Math.floor(r),N.css({left:r+"px"})),E=parseInt(N.css("left"))/(_.outerWidth()-N.outerWidth()),r=E*(_[0].scrollWidth-_.outerWidth()),o){var a=(r=t)/_[0].scrollWidth*_.outerWidth();a=Math.min(Math.max(a,0),s),N.css({left:a+"px"})}_.scrollLeft(r),_.trigger("slimscrollingX",~~r),h(),l()}if(p){var f=e,g=_.outerHeight()-Y.outerHeight();if(i&&(f=parseInt(Y.css("top"))+e*parseInt(n.wheelStep)/100,f=Math.min(Math.max(f,0),g),f=e>0?Math.ceil(f):Math.floor(f),Y.css({top:f+"px"})),k=parseInt(Y.css("top"))/(_.outerHeight()-Y.outerHeight()),f=k*(_[0].scrollHeight-_.outerHeight()),o){var m=(f=e)/_[0].scrollHeight*_.outerHeight();m=Math.min(Math.max(m,0),g),Y.css({top:m+"px"})}_.scrollTop(f),_.trigger("slimscrollingY",~~f),c(),u()}}function s(){if(N){$=Math.max(_.outerWidth()/_[0].scrollWidth*_.outerWidth(),O),N.css({width:$+"px"});var t=d&&_[0].scrollWidth>_[0].clientWidth?"block":"none";N.css({display:t})}}function a(){if(Y){D=Math.max(_.outerHeight()/_[0].scrollHeight*_.outerHeight(),L),Y.css({height:D+"px"});var t=p&&_[0].scrollHeight>_[0].clientHeight?"block":"none";Y.css({display:t})}}function h(){if(N){if(s(),clearTimeout(w),E==~~E){if(A=n.allowPageScroll,S!=E){var t=0==~~E?"left":"right";_.trigger("slimscrollX",t)}}else A=!1;S=E,$>=_.outerWidth()?A=!0:(N.stop(!0,!0).fadeIn("fast"),n.railVisible&&W.stop(!0,!0).fadeIn("fast"))}}function l(){N&&(n.alwaysVisible||(w=setTimeout(function(){n.disableFadeOut&&v||y||x||(N.fadeOut("slow"),W.fadeOut("slow"))},1e3)))}function c(){if(Y){if(a(),clearTimeout(C),k==~~k){if(A=n.allowPageScroll,R!=k){var t=0==~~k?"top":"bottom";_.trigger("slimscrollY",t)}}else A=!1;R=k,D>=_.outerHeight()?A=!0:(Y.stop(!0,!0).fadeIn("fast"),n.railVisible&&H.stop(!0,!0).fadeIn("fast"))}}function u(){Y&&(n.alwaysVisible||(C=setTimeout(function(){n.disableFadeOut&&v||b||x||(Y.fadeOut("slow"),H.fadeOut("slow"))},1e3)))}var d,p,f,g,m,v,y,b,x,w,C,I,T,D,$,E,S,k,R,B="<div></div>",L=30,O=30,A=!1,_=t(this),z=t(document);if(_.parent().hasClass(n.wrapperClass)){t.extend(n,_.data("slimScrollConfig")||{});var P=_.scrollLeft(),j=_.scrollTop();return N=_.siblings("."+n.barClassX),W=_.siblings("."+n.railClassX),Y=_.siblings("."+n.barClassY),H=_.siblings("."+n.railClassY),d="both"==n.axis||"x"==n.axis,p="both"==n.axis||"y"==n.axis,s(),a(),t.isPlainObject(e)&&("width"in e&&d&&("auto"==e.width?(_.parent().css("width","auto"),_.css("width","auto"),n.width=_.parent().parent().width()):(n.width=e.width,_.css({"white-space":"nowrap"}))),"height"in e&&p&&("auto"==e.height?(_.parent().css("height","auto"),_.css("height","auto"),n.height=_.parent().parent().height()):n.height=e.height),_.parent().css({position:"relative",overflow:"hidden",width:n.width,height:n.height}),_.css({overflow:"hidden",width:n.width,height:n.height}),"scrollToX"in e?P=parseInt(n.scrollToX):"scrollByX"in e&&(P+=parseInt(n.scrollByX)),"scrollToY"in e?j=parseInt(n.scrollToY):"scrollByY"in e&&(j+=parseInt(n.scrollByY)),"destroy"in e)?(N.remove(),W.remove(),Y.remove(),H.remove(),void _.unwrap()):void r(P,j,!1,!0)}if(!(t.isPlainObject(e)&&"destroy"in e)){d="both"==n.axis||"x"==n.axis,p="both"==n.axis||"y"==n.axis,n.height="auto"==n.height?_.parent().height():n.height,n.width="auto"==n.width?_.parent().width():n.width,_.data("slimScrollConfig",n);var M=t(B).addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height});if(_.css({overflow:"hidden",width:n.width,height:n.height}),_.wrap(M),d){"auto"!=n.width&&d&&_.css({"white-space":"nowrap"});var W=t(B).addClass(n.railClassX).css({width:"100%",height:n.size,position:"absolute",left:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.railBorderRadius,background:n.railColor,opacity:n.railOpacity,zIndex:90}),N=t(B).addClass(n.barClassX).css({background:n.color,height:n.size,position:"absolute",left:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.borderRadius,BorderRadius:n.borderRadius,MozBorderRadius:n.borderRadius,WebkitBorderRadius:n.borderRadius,zIndex:99}),F="top"==n.positionX?{top:n.distance}:{bottom:n.distance};W.css(F),N.css(F),_.parent().append(N),_.parent().append(W),n.railDraggable&&(N.on("mousedown",function(t){return x=!0,f=parseFloat(N.css("left")),g=t.pageX,z.on("mousemove.slimscrollX",function(t){currLeft=f+t.pageX-g,N.css("left",currLeft),r(0,0,N.position().left)}),z.on("mouseup.slimscrollX",function(t){x=!1,l(),z.unbind(".slimscrollX")}),!1}).on("selectstart.slimscrollX",function(t){return t.stopPropagation(),t.preventDefault(),!1}),W.on("mousedown",function(t){return r((t.offsetX-$/2)*_[0].scrollWidth/_.outerWidth(),0,!1,!0),f=parseFloat(N.css("left")),g=t.pageX,z.on("mousemove.slimscrollX",function(t){currLeft=f+t.pageX-g,N.css("left",currLeft),r(0,0,N.position().left)}),z.on("mouseup.slimscrollX",function(t){x=!1,l(),z.unbind(".slimscrollX")}),!1})),W.hover(function(){h()},function(){l()}),N.hover(function(){y=!0},function(){y=!1}),s(),"right"===n.startX?(N.css({left:_.outerWidth()-N.outerWidth()}),r(0,0,!0)):"left"!==n.startX&&(r(t(n.startX).position().left,null,null,!0),n.alwaysVisible||N.hide())}if(p){var H=t(B).addClass(n.railClassY).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.railBorderRadius,background:n.railColor,opacity:n.railOpacity,zIndex:90}),Y=t(B).addClass(n.barClassY).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.borderRadius,BorderRadius:n.borderRadius,MozBorderRadius:n.borderRadius,WebkitBorderRadius:n.borderRadius,zIndex:99}),U="right"==n.positionY?{right:n.distance}:{left:n.distance};H.css(U),Y.css(U),_.parent().append(Y),_.parent().append(H),n.railDraggable&&(Y.on("mousedown",function(t){return x=!0,f=parseFloat(Y.css("top")),m=t.pageY,z.on("mousemove.slimscrollY",function(t){currTop=f+t.pageY-m,Y.css("top",currTop),r(0,0,Y.position().top)}),z.on("mouseup.slimscrollY",function(t){x=!1,u(),z.unbind(".slimscrollY")}),!1}).on("selectstart.slimscrollY",function(t){return t.stopPropagation(),t.preventDefault(),!1}),H.on("mousedown",function(t){return r(0,(t.offsetY-D/2)*_[0].scrollHeight/_.outerHeight(),!1,!0),f=parseFloat(Y.css("top")),m=t.pageY,z.on("mousemove.slimscrollY",function(t){currTop=f+t.pageY-m,Y.css("top",currTop),r(0,0,Y.position().top)}),z.on("mouseup.slimscrollY",function(t){x=!1,u(),z.unbind(".slimscrollY")}),!1})),H.hover(function(){c()},function(){u()}),Y.hover(function(){b=!0},function(){b=!1}),a(),"bottom"===n.startY?(Y.css({top:_.outerHeight()-Y.outerHeight()}),r(0,0,!0)):"top"!==n.startY&&(r(null,t(n.startY).position().top,null,!0),n.alwaysVisible||Y.hide())}_.hover(function(){v=!0,h(),c(),l(),u()},function(){v=!1,l(),u()}),_.on("touchstart",function(t,e){t.originalEvent.touches.length&&(I=t.originalEvent.touches[0].pageX,T=t.originalEvent.touches[0].pageY)}),_.on("touchmove",function(t){A||t.originalEvent.preventDefault(),t.originalEvent.touches.length&&(r((I-t.originalEvent.touches[0].pageX)/n.touchScrollStep,(T-t.originalEvent.touches[0].pageY)/n.touchScrollStep,!0),I=t.originalEvent.touches[0].pageX,T=t.originalEvent.touches[0].pageY)}),function(t){window.addEventListener?(void 0!==window.onwheel?t.addEventListener("wheel",o,!1):void 0!==window.onmousewheel&&t.addEventListener("mousewheel",o,!1),t.addEventListener("DOMMouseScroll",o,!1)):document.attachEvent("onmousewheel",o)}(this)}}),this.trigger("initialized"),this}}),t.fn.extend({slimscroll:t.fn.slimScroll})}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(t){function e(e){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=t.extend({},this.constructor.defaults),this.option(e)}return e.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},e.prototype.option=function(e){t.extend(this.options,e)},e.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},e.prototype.init=function(){var e=this;t(document).ready(function(){e.enable(),e.build()})},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return e.start(t(i.currentTarget)),!1})},e.prototype.build=function(){var e=this;t('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(t){3===t.which&&(e.$nav.css("pointer-events","none"),e.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(e),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function i(t){n.album.push({link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var n=this,o=t(window);o.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var r,s=0,a=e.attr("data-lightbox");if(a){r=t(e.prop("tagName")+'[data-lightbox="'+a+'"]');for(var h=0;h<r.length;h=++h)i(t(r[h])),r[h]===e[0]&&(s=h)}else if("lightbox"===e.attr("rel"))i(e);else{r=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var l=0;l<r.length;l=++l)i(t(r[l])),r[l]===e[0]&&(s=l)}var c=o.scrollTop()+this.options.positionFromTop,u=o.scrollLeft();this.$lightbox.css({top:c+"px",left:u+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&t("body").addClass("lb-disable-scrolling"),this.changeImage(s)},e.prototype.changeImage=function(e){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var o=new Image;o.onload=function(){var r,s,a,h,l,c;n.attr("src",i.album[e].link),t(o),n.width(o.width),n.height(o.height),i.options.fitImagesInViewport&&(c=t(window).width(),l=t(window).height(),h=c-i.containerPadding.left-i.containerPadding.right-i.imageBorderWidth.left-i.imageBorderWidth.right-20,a=l-i.containerPadding.top-i.containerPadding.bottom-i.imageBorderWidth.top-i.imageBorderWidth.bottom-120,i.options.maxWidth&&i.options.maxWidth<h&&(h=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<h&&(a=i.options.maxHeight),(o.width>h||o.height>a)&&(o.width/h>o.height/a?(s=h,r=parseInt(o.height/(o.width/s),10),n.width(s),n.height(r)):(r=a,s=parseInt(o.width/(o.height/r),10),n.width(s),n.height(r)))),i.sizeContainer(n.width(),n.height())},o.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(document).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function i(){n.$lightbox.find(".lb-dataContainer").width(s),n.$lightbox.find(".lb-prevLink").height(a),n.$lightbox.find(".lb-nextLink").height(a),n.showImage()}var n=this,o=this.$outerContainer.outerWidth(),r=this.$outerContainer.outerHeight(),s=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,a=e+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;o!==s||r!==a?this.$outerContainer.animate({width:s,height:a},this.options.resizeDuration,"swing",function(){i()}):i()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(e){void 0!==t(this).attr("target")?window.open(t(this).attr("href"),t(this).attr("target")):location.href=t(this).attr("href")})}if(this.album.length>1&&this.options.showImageNumberLabel){var n=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(n).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&((new Image).src=this.album[this.currentImageIndex-1].link)},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=t.keyCode,i=String.fromCharCode(e).toLowerCase();27===e||i.match(/x|o|c/)?this.end():"p"===i||37===e?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):"n"!==i&&39!==e||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&t("body").removeClass("lb-disable-scrolling")},new e}),function(){function t(t,e){return t.push.apply(t,e),t}function e(t,e,i,n){for(var o=t.length,r=i+(n?1:-1);n?r--:++r<o;)if(e(t[r],r,t))return r;return-1}function i(t){return function(e){return null==e?lt:e[t]}}function n(t,e,i,n,o){return o(t,function(t,o,r){i=n?(n=!1,t):e(i,t,o,r)}),i}function o(t,e){return C(e,function(e){return t[e]})}function r(t){return t instanceof s?t:new s(t)}function s(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e}function a(t,e,i){var n=t[e];Wt.call(t,e)&&J(n,i)&&(i!==lt||e in t)||h(t,e,i)}function h(t,e,i){t[e]=i}function l(t,e,i){if("function"!=typeof t)throw new TypeError(ct);return setTimeout(function(){t.apply(lt,i)},e)}function c(t,e){var i=!0;return Jt(t,function(t,n,o){return i=!!e(t,n,o)}),i}function u(t,e,i){for(var n=-1,o=t.length;++n<o;){var r=t[n],s=e(r);if(null!=s&&(a===lt?s===s&&!0:i(s,a)))var a=s,h=r}return h}function d(t,e){var i=[];return Jt(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i}function p(e,i,n,o,r){var s=-1,a=e.length;for(n||(n=M),r||(r=[]);++s<a;){var h=e[s];i>0&&n(h)?i>1?p(h,i-1,n,o,r):t(r,h):o||(r[r.length]=h)}return r}function f(t,e){return t&&Gt(t,e,de)}function g(t,e){return d(e,function(e){return K(t[e])})}function m(t){return N(t)}function v(t,e){return t>e}function y(t,e,i,n,o){return t===e||(null==t||null==e||!et(t)&&!et(e)?t!==t&&e!==e:b(t,e,i,n,y,o))}function b(t,e,i,n,o,r){var s=re(t),a=re(e),h=s?vt:m(t),l=a?vt:m(e),c=(h=h==mt?Dt:h)==Dt,u=(l=l==mt?Dt:l)==Dt,d=h==l;r||(r=[]);var p=te(r,function(e){return e[0]==t}),f=te(r,function(t){return t[0]==e});if(p&&f)return p[1]==e;if(r.push([t,e]),r.push([e,t]),d&&!c){y=s?z(t,e,i,n,o,r):P(t,e,h,i,n,o,r);return r.pop(),y}if(!(i&ut)){var g=c&&Wt.call(t,"__wrapped__"),v=u&&Wt.call(e,"__wrapped__");if(g||v){y=o(g?t.value():t,v?e.value():e,i,n,r);return r.pop(),y}}if(!d)return!1;var y=j(t,e,i,n,o,r);return r.pop(),y}function x(t){return"function"==typeof t?t:null==t?st:("object"==typeof t?I:i)(t)}function w(t,e){return t<e}function C(t,e){var i=-1,n=G(t)?Array(t.length):[];return Jt(t,function(t,o,r){n[++i]=e(t,o,r)}),n}function I(t){var e=Qt(t);return function(i){var n=e.length;if(null==i)return!n;for(i=Object(i);n--;){var o=e[n];if(!(o in i&&y(t[o],i[o],ut|dt)))return!1}return!0}}function T(t,e){return t=Object(t),q(e,function(e,i){return i in t&&(e[i]=t[i]),e},{})}function D(t,e){return Zt(F(t,e,st),t+"")}function $(t,e,i){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var r=Array(o);++n<o;)r[n]=t[n+e];return r}function E(t){return $(t,0,t.length)}function S(t,e){var i;return Jt(t,function(t,n,o){return!(i=e(t,n,o))}),!!i}function k(e,i){return q(i,function(e,i){return i.func.apply(i.thisArg,t([e],i.args))},e)}function R(t,e){if(t!==e){var i=t!==lt,n=null===t,o=t===t,r=e!==lt,s=null===e,a=e===e;if(!s&&t>e||n&&r&&a||!i&&a||!o)return 1;if(!n&&t<e||s&&i&&o||!r&&o||!a)return-1}return 0}function B(t,e,i,n){var o=!i;i||(i={});for(var r=-1,s=e.length;++r<s;){var l=e[r],c=n?n(i[l],t[l],l,i,t):lt;c===lt&&(c=t[l]),o?h(i,l,c):a(i,l,c)}return i}function L(t){return D(function(e,i){var n=-1,o=i.length,r=o>1?i[o-1]:lt;for(r=t.length>3&&"function"==typeof r?(o--,r):lt,e=Object(e);++n<o;){var s=i[n];s&&t(e,s,n,r)}return e})}function O(t){return function(){var e=arguments,i=Vt(t.prototype),n=t.apply(i,e);return tt(n)?n:i}}function A(t,e,i,n){function o(){for(var e=-1,a=arguments.length,h=-1,l=n.length,c=Array(l+a),u=this&&this!==At&&this instanceof o?s:t;++h<l;)c[h]=n[h];for(;a--;)c[h++]=arguments[++e];return u.apply(r?i:this,c)}if("function"!=typeof t)throw new TypeError(ct);var r=e&pt,s=O(t);return o}function _(t,e,i,n){return t===lt||J(t,Mt[i])&&!Wt.call(n,i)?e:t}function z(t,e,i,n,o,r){var s=i&ut,a=t.length,h=e.length;if(a!=h&&!(s&&h>a))return!1;for(var l=-1,c=!0,u=i&dt?[]:lt;++l<a;){var d=t[l],p=e[l];if(void 0!==lt){c=!1;break}if(u){if(!S(e,function(t,e){if(!U(u,e)&&(d===t||o(d,t,i,n,r)))return u.push(e)})){c=!1;break}}else if(d!==p&&!o(d,p,i,n,r)){c=!1;break}}return c}function P(t,e,i,n,o,r,s){switch(i){case bt:case xt:case Tt:return J(+t,+e);case wt:return t.name==e.name&&t.message==e.message;case Et:case St:return t==e+""}return!1}function j(t,e,i,n,o,r){var s=i&ut,a=de(t),h=a.length;if(h!=de(e).length&&!s)return!1;for(var l=h;l--;){var c=a[l];if(!(s?c in e:Wt.call(e,c)))return!1}for(var u=!0,d=s;++l<h;){var p=t[c=a[l]],f=e[c];if(!(void 0===lt?p===f||o(p,f,i,n,r):void 0)){u=!1;break}d||(d="constructor"==c)}if(u&&!d){var g=t.constructor,m=e.constructor;g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m)&&(u=!1)}return u}function M(t){return re(t)||oe(t)}function W(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function N(t){return Ft.call(t)}function F(t,e,i){return e=qt(e===lt?t.length-1:e,0),function(){for(var n=arguments,o=-1,r=qt(n.length-e,0),s=Array(r);++o<r;)s[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=i(s),t.apply(this,a)}}function H(t){return(null==t?0:t.length)?p(t,1):[]}function Y(t){return t&&t.length?t[0]:lt}function U(t,e,i){for(var n=null==t?0:t.length,o=((i="number"==typeof i?i<0?qt(n+i,0):i:0)||0)-1,r=e===e;++o<n;){var s=t[o];if(r?s===e:s!==s)return o}return-1}function X(t){var e=r(t);return e.__chain__=!0,e}function Q(t,e){return Jt(t,x(e))}function q(t,e,i){return n(t,x(e),i,arguments.length<3,Jt)}function V(t,e){var i;if("function"!=typeof e)throw new TypeError(ct);return t=se(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=lt),i}}function J(t,e){return t===e||t!==t&&e!==e}function G(t){return null!=t&&Z(t.length)&&!K(t)}function K(t){if(!tt(t))return!1;var e=m(t);return e==Ct||e==It||e==yt||e==$t}function Z(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=gt}function tt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function et(t){return null!=t&&"object"==typeof t}function it(t){return"number"==typeof t||et(t)&&m(t)==Tt}function nt(t){return"string"==typeof t||!re(t)&&et(t)&&m(t)==St}function ot(t){return"string"==typeof t?t:null==t?"":t+""}function rt(t){return null==t?[]:o(t,de(t))}function st(t){return t}function at(e,i,n){var o=de(i),r=g(i,o);null!=n||tt(i)&&(r.length||!o.length)||(n=i,i=e,e=this,r=g(i,de(i)));var s=!(tt(n)&&"chain"in n&&!n.chain),a=K(e);return Jt(r,function(n){var o=i[n];e[n]=o,a&&(e.prototype[n]=function(){var i=this.__chain__;if(s||i){var n=e(this.__wrapped__);return(n.__actions__=E(this.__actions__)).push({func:o,args:arguments,thisArg:e}),n.__chain__=i,n}return o.apply(e,t([this.value()],arguments))})}),e}function ht(){}var lt,ct="Expected a function",ut=1,dt=2,pt=1,ft=1/0,gt=9007199254740991,mt="[object Arguments]",vt="[object Array]",yt="[object AsyncFunction]",bt="[object Boolean]",xt="[object Date]",wt="[object Error]",Ct="[object Function]",It="[object GeneratorFunction]",Tt="[object Number]",Dt="[object Object]",$t="[object Proxy]",Et="[object RegExp]",St="[object String]",kt=/[&<>"']/g,Rt=RegExp(kt.source),Bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lt="object"==typeof global&&global&&global.Object===Object&&global,Ot="object"==typeof self&&self&&self.Object===Object&&self,At=Lt||Ot||Function("return this")(),_t="object"==typeof exports&&exports&&!exports.nodeType&&exports,zt=_t&&"object"==typeof module&&module&&!module.nodeType&&module,Pt=function(t){return function(e){return null==t?lt:t[e]}}(Bt),jt=Array.prototype,Mt=Object.prototype,Wt=Mt.hasOwnProperty,Nt=0,Ft=Mt.toString,Ht=At._,Yt=Object.create,Ut=Mt.propertyIsEnumerable,Xt=At.isFinite,Qt=function(t,e){return function(i){return t(e(i))}}(Object.keys,Object),qt=Math.max,Vt=function(){function t(){}return function(e){if(!tt(e))return{};if(Yt)return Yt(e);t.prototype=e;var i=new t;return t.prototype=lt,i}}();(s.prototype=Vt(r.prototype)).constructor=s;var Jt=function(t,e){return function(i,n){if(null==i)return i;if(!G(i))return t(i,n);for(var o=i.length,r=e?o:-1,s=Object(i);(e?r--:++r<o)&&!1!==n(s[r],r,s););return i}}(f),Gt=function(t){return function(e,i,n){for(var o=-1,r=Object(e),s=n(e),a=s.length;a--;){var h=s[t?a:++o];if(!1===i(r[h],h,r))break}return e}}(),Kt=ht,Zt=st,te=function(t){return function(e,i,n){var o=Object(e);if(!G(e)){var r=x(i,3);e=de(e),i=function(t){return r(o[t],t,o)}}var s=t(e,i,n);return s>-1?o[r?e[s]:s]:lt}}(function(t,i,n){var o=null==t?0:t.length;if(!o)return-1;var r=null==n?0:se(n);return r<0&&(r=qt(o+r,0)),e(t,x(i,3),r)}),ee=D(function(t,e,i){return A(t,32|pt,e,i)}),ie=D(function(t,e){return l(t,1,e)}),ne=D(function(t,e,i){return l(t,ae(e)||0,i)}),oe=Kt(function(){return arguments}())?Kt:function(t){return et(t)&&Wt.call(t,"callee")&&!Ut.call(t,"callee")},re=Array.isArray,se=Number,ae=Number,he=L(function(t,e){B(e,Qt(e),t)}),le=L(function(t,e){B(e,W(e),t)}),ce=L(function(t,e,i,n){B(e,pe(e),t,n)}),ue=D(function(t){return t.push(lt,_),ce.apply(lt,t)}),de=Qt,pe=W,fe=function(t){return Zt(F(t,lt,H),t+"")}(function(t,e){return null==t?{}:T(t,e)}),ge=x;r.assignIn=le,r.before=V,r.bind=ee,r.chain=X,r.compact=function(t){return d(t,Boolean)},r.concat=function(){var e=arguments.length;if(!e)return[];for(var i=Array(e-1),n=arguments[0],o=e;o--;)i[o-1]=arguments[o];return t(re(n)?E(n):[n],p(i,1))},r.create=function(t,e){var i=Vt(t);return null==e?i:he(i,e)},r.defaults=ue,r.defer=ie,r.delay=ne,r.filter=function(t,e){return d(t,x(e))},r.flatten=H,r.flattenDeep=function(t){return(null==t?0:t.length)?p(t,ft):[]},r.iteratee=ge,r.keys=de,r.map=function(t,e){return C(t,x(e))},r.matches=function(t){return I(he({},t))},r.mixin=at,r.negate=function(t){if("function"!=typeof t)throw new TypeError(ct);return function(){var e=arguments;return!t.apply(this,e)}},r.once=function(t){return V(2,t)},r.pick=fe,r.slice=function(t,e,i){var n=null==t?0:t.length;return e=null==e?0:+e,i=i===lt?n:+i,n?$(t,e,i):[]},r.sortBy=function(t,e){var n=0;return e=x(e),C(C(t,function(t,i,o){return{value:t,index:n++,criteria:e(t,i,o)}}).sort(function(t,e){return R(t.criteria,e.criteria)||t.index-e.index}),i("value"))},r.tap=function(t,e){return e(t),t},r.thru=function(t,e){return e(t)},r.toArray=function(t){return G(t)?t.length?E(t):[]:rt(t)},r.values=rt,r.extend=le,at(r,r),r.clone=function(t){return tt(t)?re(t)?E(t):B(t,Qt(t)):t},r.escape=function(t){return(t=ot(t))&&Rt.test(t)?t.replace(kt,Pt):t},r.every=function(t,e,i){return e=i?lt:e,c(t,x(e))},r.find=te,r.forEach=Q,r.has=function(t,e){return null!=t&&Wt.call(t,e)},r.head=Y,r.identity=st,r.indexOf=U,r.isArguments=oe,r.isArray=re,r.isBoolean=function(t){return!0===t||!1===t||et(t)&&m(t)==bt},r.isDate=function(t){return et(t)&&m(t)==xt},r.isEmpty=function(t){return G(t)&&(re(t)||nt(t)||K(t.splice)||oe(t))?!t.length:!Qt(t).length},r.isEqual=function(t,e){return y(t,e)},r.isFinite=function(t){return"number"==typeof t&&Xt(t)},r.isFunction=K,r.isNaN=function(t){return it(t)&&t!=+t},r.isNull=function(t){return null===t},r.isNumber=it,r.isObject=tt,r.isRegExp=function(t){return et(t)&&m(t)==Et},r.isString=nt,r.isUndefined=function(t){return t===lt},r.last=function(t){var e=null==t?0:t.length;return e?t[e-1]:lt},r.max=function(t){return t&&t.length?u(t,st,v):lt},r.min=function(t){return t&&t.length?u(t,st,w):lt},r.noConflict=function(){return At._===this&&(At._=Ht),this},r.noop=ht,r.reduce=q,r.result=function(t,e,i){var n=null==t?lt:t[e];return n===lt&&(n=i),K(n)?n.call(t):n},r.size=function(t){return null==t?0:(t=G(t)?t:Qt(t)).length},r.some=function(t,e,i){return e=i?lt:e,S(t,x(e))},r.uniqueId=function(t){var e=++Nt;return ot(t)+e},r.each=Q,r.first=Y,at(r,function(){var t={};return f(r,function(e,i){Wt.call(r.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),r.VERSION="4.17.4",Jt(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?String.prototype:jt)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|join|replace|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var o=this.value();return e.apply(re(o)?o:[],t)}return this[i](function(i){return e.apply(re(i)?i:[],t)})}}),r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=function(){return k(this.__wrapped__,this.__actions__)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(At._=r,define(function(){return r})):zt?((zt.exports=r)._=r,_t._=r):At._=r}.call(this),function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,r,a){function h(t,e,n){var o,r="$()."+i+'("'+e+'")';return t.each(function(t,h){var l=a.data(h,i);if(l){var c=l[e];if(c&&"_"!=e.charAt(0)){var u=c.apply(l,n);o=void 0===o?u:o}else s(r+" is not a valid method")}else s(i+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==o?o:t}function l(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new r(n,e),a.data(n,i,o))})}(a=a||e||t.jQuery)&&(r.prototype.option||(r.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){return"string"==typeof t?h(this,t,o.call(arguments,1)):(l(this,t),this)},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,r=t.console,s=void 0===r?function(){}:function(t){r.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),o=i[n+=s?0:1]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;h>e;e++)t[a[e]]=0;return t}function i(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function n(){if(!l){l=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var s=i(e);o.isBoxSizeOuter=r=200==t(s.width),n.removeChild(e)}}function o(o){if(n(),"string"==typeof o&&(o=document.querySelector(o)),o&&"object"==typeof o&&o.nodeType){var s=i(o);if("none"==s.display)return e();var l={};l.width=o.offsetWidth,l.height=o.offsetHeight;for(var c=l.isBorderBox="border-box"==s.boxSizing,u=0;h>u;u++){var d=a[u],p=s[d],f=parseFloat(p);l[d]=isNaN(f)?0:f}var g=l.paddingLeft+l.paddingRight,m=l.paddingTop+l.paddingBottom,v=l.marginLeft+l.marginRight,y=l.marginTop+l.marginBottom,b=l.borderLeftWidth+l.borderRightWidth,x=l.borderTopWidth+l.borderBottomWidth,w=c&&r,C=t(s.width);!1!==C&&(l.width=C+(w?0:g+b));var I=t(s.height);return!1!==I&&(l.height=I+(w?0:m+x)),l.innerWidth=l.width-(g+b),l.innerHeight=l.height-(m+x),l.outerWidth=l.width+v,l.outerHeight=l.height+y,l}}var r,s="undefined"==typeof console?function(){}:function(t){console.error(t)},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=a.length,l=!1;return o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"object"==typeof t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){var o=[];return(t=i.makeArray(t)).forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),r=0;r<i.length;r++)o.push(i[r])}}),o},i.debounceMethod=function(t,e,i){var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout(function(){n.apply(r,e),delete r[o]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady(function(){var r=i.toDashed(o),s="data-"+r,a=document.querySelectorAll("["+s+"]"),h=document.querySelectorAll(".js-"+r),l=i.makeArray(a).concat(i.makeArray(h)),c=s+"-options",u=t.jQuery;l.forEach(function(t){var i,r=t.getAttribute(s)||t.getAttribute(c);try{i=r&&JSON.parse(r)}catch(e){return void(n&&n.error("Error parsing "+s+" on "+t.className+": "+e))}var a=new e(t,i);u&&u.data(t,o,a)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var o=document.documentElement.style,r="string"==typeof o.transition?"transition":"WebkitTransition",s="string"==typeof o.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],h={transform:s,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},l=n.prototype=Object.create(t.prototype);l.constructor=n,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.getSize=function(){this.size=e(this.element)},l.css=function(t){var e=this.element.style;for(var i in t)e[h[i]||i]=t[i]},l.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],r=this.layout.size,s=-1!=n.indexOf("%")?parseFloat(n)/100*r.width:parseInt(n,10),a=-1!=o.indexOf("%")?parseFloat(o)/100*r.height:parseInt(o,10);s=isNaN(s)?0:s,a=isNaN(a)?0:a,s-=e?r.paddingLeft:r.paddingRight,a-=i?r.paddingTop:r.paddingBottom,this.position.x=s,this.position.y=a},l.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",r=i?"left":"right",s=i?"right":"left",a=this.position.x+t[o];e[r]=this.getXValue(a),e[s]="";var h=n?"paddingTop":"paddingBottom",l=n?"top":"bottom",c=n?"bottom":"top",u=this.position.y+t[h];e[l]=this.getYValue(u),e[c]="",this.css(e),this.emitEvent("layout",[this])},l.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},l.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},l._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),r=parseInt(e,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),!s||this.isTransitioning){var a=t-i,h=e-n,l={};l.transform=this.getTranslate(a,h),this.transition({to:l,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},l.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},l.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},l._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},l.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var c="opacity,"+function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}(s);l.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:c,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1)}},l.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},l.onotransitionend=function(t){this.ontransitionend(t)};var u={"-webkit-transform":"transform"};l.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=u[t.propertyName]||t.propertyName;delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd&&(e.onEnd[n].call(this),delete e.onEnd[n]),this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},l._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(d)},l.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},l.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,r){return e(t,i,n,o,r)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,o){"use strict";function r(t,e){var i=n.getQueryElement(t);if(i){this.element=i,l&&(this.$element=l(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++u;this.element.outlayerGUID=o,d[o]=this,this._create(),this._getOption("initLayout")&&this.layout()}else h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function s(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];return i.length?(i=parseFloat(i))*(f[n]||1):0}var h=t.console,l=t.jQuery,c=function(){},u=0,d={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=r.prototype;n.extend(p,e.prototype),p.option=function(t){n.extend(this.options,t)},p._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},p._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},p.reloadItems=function(){this.items=this._itemize(this.element.children)},p._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var r=new i(e[o],this);n.push(r)}return n},p._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},p.getItemElements=function(){return this.items.map(function(t){return t.element})},p.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},p._init=p.layout,p._resetLayout=function(){this.getSize()},p.getSize=function(){this.size=i(this.element)},p._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},p.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},p._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},p._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},p._getItemLayoutPosition=function(){return{x:0,y:0}},p._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},p.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},p._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},p._postLayout=function(){this.resizeContainer()},p.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},p._getContainerSize=c,p._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},p._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){++s==r&&i()}var o=this,r=e.length;if(e&&r){var s=0;e.forEach(function(e){e.once(t,n)})}else i()},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),l)if(this.$element=this.$element||l(this.element),e){var o=l.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},p.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},p.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},p.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},p.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},p._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},p._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},p._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},p._manageStamp=c,p._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t);return{left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom}},p.handleEvent=n.handleEvent,p.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},p.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},p.onresize=function(){this.resize()},n.debounceMethod(r,"onresize",100),p.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},p.needsResizeLayout=function(){var t=i(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},p.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},p.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},p.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},p.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},p.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},p.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},p.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},p.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},p.getItems=function(t){var e=[];return(t=n.makeArray(t)).forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},p.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},p.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete d[e],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},r.data=function(t){var e=(t=n.getQueryElement(t))&&t.outlayerGUID;return e&&d[e]},r.create=function(t,e){var i=s(r);return i.defaults=n.extend({},r.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},r.compatOptions),i.namespace=t,i.data=r.data,i.Item=s(o),n.htmlInit(i,t),l&&l.bridget&&l.bridget(t,i),i};var f={ms:1,s:1e3};return r.Item=o,r}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/n,s=n-o%n,a=s&&1>s?"round":"floor";r=Math[a](r),this.cols=Math.max(r,1)},n.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&1>e?"round":"ceil",n=Math[i](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,t),r={x:this.columnWidth*o.col,y:o.y},s=o.y+t.size.outerHeight,a=n+o.col,h=o.col;a>h;h++)this.colYs[h]=s;return r},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},n._getTopColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++)e[n]=this._getColGroupY(n,t);return e},n._getColGroupY=function(t,e){if(2>e)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols;i=t>1&&i+t>this.cols?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},n._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this._getOption("originLeft")?n.left:n.right,r=o+i.outerWidth,s=Math.floor(o/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var h=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,l=s;a>=l;l++)this.colYs[l]=Math.max(h,this.colYs[l])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i});